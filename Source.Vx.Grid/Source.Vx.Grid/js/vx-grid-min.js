!function(){"use strict";function e(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"_"+e()}function t(e,t,n,i,o,l,r,a,d){var c=this;c.scope=e,c.timeout=i,c.filter=r,c.compile=d,c.modal=t,c.sce=n,c.rootScope=o,c.window=l,c.q=a,c.vxColSettings={},c.vxConfig={},e.posLeft=1,e.posTop=0,c.lastScroll={},c.w=angular.element(c.window),e.$on("vxInlineEditFieldChange",function(e,t){if(1==c.vxConfig.inlineEditSyncEnabled){var n=_.filter(c.vxColSettings.multiSelected,function(e){return 0==e.localeCompare(t.rowId)});"undefined"!=typeof n&&null!=n&&n.length>0&&_.each(c.vxColSettings.multiSelected,function(e){var n=_.find(c.vxConfig.vxData,function(t){return t[c.vxColSettings.primaryId]==e});"undefined"!=typeof n&&null!=n&&1==c.vxColSettings.inlineEditState[e]&&(n[t.field]=t.value)})}}),e.$on("vsRepeatCollectionPartiallyRendered",function(t,n){e.$emit("vxPartiallyRendered",{id:c.vxConfig.id,data:n}),1==c.vxConfig.selectAllOnRenderAll&&(c.vxColSettings.selectAllEnabled=!1,e.$emit("vxPartiallyRenderedSelectAllDisabled",{id:c.vxConfig.id,data:n}))}),e.$on("vsRepeatCollectionCompletelyRendered",function(t,n){e.$emit("vxCompletelyRendered",{id:c.vxConfig.id,data:n}),1==c.vxConfig.selectAllOnRenderAll&&(c.vxColSettings.selectAllEnabled=!0,e.$emit("vxCompletelyRenderedSelectAllEnabled",{id:c.vxConfig.id,data:n}))}),e.$on("vxGridChangeRowClass",function(e,t){0==t.id.localeCompare(c.vxConfig.id)&&c.changeRowClass(t.data)}),c.changeRowClass=function(t){for(var n in t)c.vxColSettings.vxRowClass[n]=t[n];"$apply"!=e.$root.$$phase&&"$digest"!=e.$root.$$phase&&e.$apply()},e.$on("vxGridResetRowClass",function(e,t){0==t.id.localeCompare(c.vxConfig.id)&&(c.vxColSettings.vxRowClass={})}),e.$on("vxGridDisableRowSelection",function(e,t){0==t.id.localeCompare(c.vxConfig.id)&&_.each(t.data,function(e){c.vxColSettings.vxRowSelectionDisable[e.key]=e.value})}),e.$on("vxGridResetDisableRowSelection",function(e,t){if(0==t.id.localeCompare(c.vxConfig.id))for(var n in c.vxColSettings.vxRowSelectionDisable)c.vxColSettings.vxRowSelectionDisable[n]=!1})}function n(e){var t=this;_.each(t.vxConfig.columnDefConfigs,function(t){t.id==e&&(t.filterLimit=t.filterLimit+2)}),"$apply"!=t.scope.$root.$$phase&&"$digest"!=t.scope.$root.$$phase&&t.scope.$digest()}function i(e,t,n){var i=n+"_"+t+"_key_",o="string";return null==e.value?i+="null":null==e.value?i+="null":"object"!=typeof e.value?(i+=e.value.toString().replace(/\s+/g,"_"),o=e.type):(i+=JSON.stringify(e.value).replace(/\s+/g,"_"),o="object"),{key:i,type:o}}String.prototype.capitalizeFirstLetter=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.replaceAll=function(e,t){var n=new RegExp(e,"g");return this.replace(n,t)},window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)}}(),angular.module("vx.grid.modules",["ngSanitize","ui.bootstrap","vs-repeat","angular-json-editor","duScroll"]).directive("vxGrid",function(){return{restrict:"E",scope:{config:"=",scrollParent:"="},controller:["$scope","$uibModal","$sce","$timeout","$rootScope","$window","$filter","$q","$compile",t],controllerAs:"vxGridCtrl",replace:!0,templateUrl:"template/vx-grid/vx-grid.html",link:function(e,t,n){e.vxGridCtrl.selfEle=t,e.$watchCollection("config.data",function(t){var n=new Date;"undefined"!=typeof t&&0==t.length?(t=[{fillEmptyElement:!0}],e.config.noData=!0,1==e.config.hybrid&&"undefined"!=typeof e.vxGridCtrl.vxConfig&&angular.element(document.getElementById("_vxHybrid"+e.vxGridCtrl.vxConfig.id)).empty()):e.config.noData=!1,1==e.config.hybrid?(e.config.vxData=_.clone(t),e.vxGridCtrl._origData=_.clone(t)):e.config.vxData=angular.copy(t),n=new Date,delete e.vxGridCtrl.vxConfig,e.vxGridCtrl.resetVxInstance()}),1!=e.config.hybrid&&e.$watchCollection(function(){return e.vxGridCtrl.vxConfig.vxFilteredData},function(t){t.length>=0&&1==e.vxGridCtrl.vxConfig.pagination&&(e.vxGridCtrl.vxColSettings.pages=_.range(Math.ceil(t.length/parseInt(e.vxGridCtrl.vxConfig.pageLength))),e.vxGridCtrl.vxColSettings.vxPageEnabled=e.vxGridCtrl.vxColSettings.pages.length>1,e.vxGridCtrl.vxColSettings.activePage=0,e.vxGridCtrl.vxColSettings.vxPageStartPosition=0)}),e.vxGridCtrl.getvxTableContainerWidth=function(){var e=angular.element($(t).find(".vx-scroller")[0]);return e.width()+"px"},e.vxGridCtrl.getNonHiddenColCount=function(){var t=1;return"undefined"!=typeof e.vxGridCtrl.vxConfig.columnDefConfigs&&e.vxGridCtrl.vxConfig.columnDefConfigs.length>0&&(t=_.filter(e.vxGridCtrl.vxConfig.columnDefConfigs,function(e){return 0==e.hidden}).length),t}}}}).directive("vxCompile",["$compile",function(e){return function(t,n,i){t.$watch(function(e){return e.$eval(i.vxCompile)},function(i){n.html(i),e(n.contents())(t)})}}]).directive("vxCompileCloneLink",["$compile",function(e){var t={},n={};return function(i,o,l){var r=null;l.vxCompileCloneLink in t?r=n[l.vxCompileCloneLink]:(n[l.vxCompileCloneLink]=i.$eval(l.vxCompileCloneLink),r=n[l.vxCompileCloneLink]);var a=null;r in t?a=t[r]:(t[r]=e(r),a=t[r]),a(i,function(e,t){o.append(e)})}}]).directive("vxEditFocusDisable",["$rootScope","$parse",function(e,t){var n={},i={},o=["input","select","button","textarea","object"];return{restrict:"AEC",link:function(e,l,r){var a=(t(r.vxEditFocusDisable),$(l).attr("id"));e.$watch(r.vxEditFocusDisable,function(e){if(e){i[a]={available:!0,stack:[]},_.each(o,function(e){var t=$(l).find(e);t.length>0&&_.each(t,function(e){var t=$(e).attr("id");("undefined"==typeof t||null==t||""==t)&&($(e).attr("id",_.uniqueId("elemid")),t=$(e).attr("id")),i[a].stack.push(t)})});var t=$(l).find("[tabindex]");t.length>0&&_.each(t,function(e){var t=$(e).attr("tabindex");if(-1!=t&&0==_.contains(o,e.nodeName.toUpperCase())&&0==_.contains(i[a].stack,n)){var n=$(e).attr("id");("undefined"==typeof n||null==n||""==n)&&($(e).attr("id",_.uniqueId("elemid")),n=$(e).attr("id")),i[a].stack.push(n)}}),_.each(i[a].stack,function(e){n[e]=$("#"+e).attr("tabindex")||0,$("#"+e).attr("tabindex",-1)})}else 0==e&&"undefined"!=typeof i[a]&&"undefined"!=typeof i[a].available&&1==i[a].available&&(_.each(i[a].stack,function(e){var t=n[e];$("#"+e).attr("tabindex",t)}),i[a].available=!1)})}}}]).directive("axKey",["$rootScope","$parse",function(e,t){return{restrict:"A",compile:function(n,i){var o=t(i.axKey);return function(t,n){function l(n){var i=function(){o(t,{$event:n})};e.$$phase?t.$evalAsync(i):t.$apply(i)}n.attr("role")||n.attr("role","button"),n.attr("tabindex")||n.attr("tabindex",0);var r=[],a=0;r.push(t.$watch(i.axDisabled||i.ngDisabled,function(e){e?(a=n.attr("tabindex"),n.attr("tabindex",-1),n.attr("aria-disabled",!0)):(n.attr("tabindex",0),n.attr("aria-disabled",!1))})),n.on("click",function(e){t.$eval(i.axDisabled)||t.$eval(i.ngDisabled)||l(e)}),n.on("keyup",function(e){t.$eval(i.axDisabled)||t.$eval(i.ngDisabled)||(13==e.keyCode||32==e.keyCode)&&l(e)}),t.$on("$destroy",function(){for(;r.length;)r.shift()()})}}}}]).directive("vxKeepWatch",function(){return{restrict:"AEC",link:function(e,t,n){var i=n.vxKeepWatch,o=!1;e.$watch(n[i],function(t){o?e.$emit("vxInlineEditFieldChange",{field:n.vxKeepWatchField,value:t,rowId:n.vxKeepWatchRowId}):o=!0})}}}).filter("vxGridMultiBoxFilters",function(){return function(e,t){if("undefined"!=typeof t&&null!=t&&t.length>0){var n=e,i=e,o=_.groupBy(t,"col");for(var l in o){var r=o[l],a=[];_.each(r,function(e){a=_.union(a,_.filter(i,function(t){return"undefined"!=typeof e.label&&null!=e.label&&e.label!={}&&"undefined"!=typeof t[e.col]&&null!=t[e.col]&&t[e.col]!={}?"date"==e.type?t[e.col].getTime()==e.label:"object"==e.type?0==JSON.stringify(t[e.col]).localeCompare(JSON.stringify(e.label)):0==t[e.col].toString().trim().localeCompare(e.label):t[e.col]==e.label}))}),n=_.intersection(n,a)}return n}return e}}).directive("clickOutsideHeader",["$document","$parse",function(e,t){return{restrict:"A",link:function(n,i,o){var l=void 0!==o.outsideIfNot?o.outsideIfNot.replace(", ",",").split(","):[];void 0!==o.id&&l.push(o.id);var r=t(o.clickOutsideHeader);e.on("click",function(e){try{var t=$(e.target).closest("th.vxHeadRowCell");("undefined"==typeof t||null==t||0==t.length)&&n.$eval(o.checkClickOutside)&&n.$eval(r)}catch(e){}})}}}]).filter("vxNumberFixedLen",function(){return function(e,t){var n=parseInt(e,10);if(t=parseInt(t,10),isNaN(n)||isNaN(t))return e;for(n=""+n;n.length<t;)n="0"+n;return n}}).filter("vxStartFrom",function(){return function(e,t){if(e){t=+t;var n=e.slice(t);return n}return[]}}),t.prototype.getWindowDimensions=function(){var e=this;return{h:e.w.height(),w:e.w.width()}},t.prototype.resetVxInstance=function(){var e=this;console.log("resetVxInstance",e),e.lastScroll={},e.vxColSettings={primaryId:null,dropdDownEnabled:{},dropdDownLoaded:{},dropdDownOpen:{},dropDownSort:{},dropDownFilters:{},dropDownGroup:{},colFiltersStatus:{},colFilterPairs:{},colFiltersActivated:{},lastProcessedForFilters:{},multiSelected:[],multiSelColDependent:!1,reverseSettings:{},groupPredicate:{},groupByColActivated:{},rowSelected:{},vxRowClass:{},vxRowSelectionDisable:{},revealWrapRowData:!1,selectAllEnabled:!0,menu:!1,xsViewEnabled:!1,xsRowTitleTemplateAvailable:!1,xsSearch:"",searchToken:"",inlineEditState:{},colWithInlineEdits:[],groupKeys:{},allRowSelected:!1,allRowSelectionDisabled:!1,filterSearchToken:{},enteredSearchToken:{},saveInProgress:{}};var t=(new Date,new Date),n=new Date;1==e.scope.config.hybrid?e.vxConfig=e.scope.config:e.vxConfig=angular.copy(e.scope.config),t=new Date,n=new Date;var i=_.find(e.vxConfig.columnDefConfigs,function(e){return 1==e.primary}),o="_uid";if("undefined"!=typeof i&&null!=i?(_.each(e.vxConfig.vxData,function(e,t){1!=e.fillEmptyElement&&(e[i.id]=e[i.id].toString(),e[o]=e[i.id]),e._vxCreated=(new Date).getTime()}),o=i.id):_.each(e.vxConfig.vxData,function(e,t){e.primaryId=t}),e.vxColSettings.primaryId=o,1==e.vxConfig.inlineEditingEnabled&&1!=e.vxConfig.hybrid){var l=_.find(e.vxConfig.columnDefConfigs,function(e){return 0==e.id.localeCompare("inlinediting")});if("undefined"==typeof l||null==l||l=={}){var r={id:"inlinediting",columnName:"Edit",renderDefn:!0,renderHeadDefn:!0,ddSort:!1,ddGroup:!1,ddFilters:!1,width:"50",locked:!0,headTabIndex:-1,cellDefn:'<div class="vx-row-edit icon-container" tabindex="0" ax-key="vxGridCtrl.editRow(VX_ROW_POINT)" ng-show="vxGridCtrl.vxColSettings.inlineEditState[VX_ROW_POINT] == false && vxGridCtrl.vxColSettings.saveInProgress[VX_ROW_POINT] != true" role="button" aria-labelledby="vx_row_edit vx_row_sel_{{::row[vxGridCtrl.vxColSettings.primaryId]}}" ><i class="icon icon-edit"></i></div><div class="vx-row-edit icon-container" ax-disabled="vxGridCtrl.vxConfig.invalidRows[row[vxGridCtrl.vxColSettings.primaryId]]" tabindex="0" ax-key="vxGridCtrl.saveRow(VX_ROW_POINT)" ng-show="vxGridCtrl.vxColSettings.inlineEditState[VX_ROW_POINT] == true && vxGridCtrl.vxColSettings.saveInProgress[VX_ROW_POINT] != true" role="button" aria-labelledby="vx_row_save vx_row_sel_{{::row[vxGridCtrl.vxColSettings.primaryId]}}" ><i class="icon icon-save"></i></div><div class="vx-row-edit icon-container loader" tabindex="0" ng-show="vxGridCtrl.vxColSettings.saveInProgress[VX_ROW_POINT] == true" role="button" aria-labelledby="vx_row_sel_row vx_row_sel_{{::row[vxGridCtrl.vxColSettings.primaryId]}}" ><img class="loader-row" src="/resource/loaderBlue30.GIF"></i></div>',inlineEditOnColumnEnabled:!1};e.vxConfig.columnDefConfigs.unshift(r)}_.each(e.vxConfig.vxData,function(t,n){var i=t[e.vxColSettings.primaryId];e.vxColSettings.inlineEditState[i]=e.scope.config.allRowsInDefaultEdit||!1})}if(t=new Date,1==e.vxConfig.selectionEnabled){var l=_.find(e.vxConfig.columnDefConfigs,function(e){return 0==e.id.localeCompare("checkbox")});if("undefined"==typeof l||null==l||l=={}){var r={id:"checkbox",columnName:"Row Selection",columnIsRowSelect:!0,renderDefn:!0,renderHeadDefn:!0,ddSort:!1,ddGroup:!1,ddFilters:!1,width:"50",locked:!0,headTabIndex:-1,headerDefn:'<div class="vx-row-select"><input class="vx-row-select-toggle" type="checkbox" ng-disabled="vxConfig.noData == true" ng-model="vxGridCtrl.vxColSettings.allRowSelected" ng-change="vxGridCtrl.allRowSelectionChanged()" ng-disabled="vxGridCtrl.vxColSettings.allRowSelectionDisabled" ng-if="vxConfig.allRowsSelectionEnabled" aria-labelledby="vx_row_sel_all_row"  /></div>',cellDefn:'<div class="vx-row-select"><input class="vx-row-select-toggle" type="checkbox" ng-model="vxGridCtrl.vxColSettings.rowSelected[VX_ROW_POINT]" ng-change="vxGridCtrl.rowSelectionChanged(row)" ng-disabled="vxGridCtrl.vxColSettings.vxRowSelectionDisable[VX_ROW_POINT]" ng-attr-id="vx_row-sel_in{{::row[vxGridCtrl.vxColSettings.primaryId]}}" aria-labelledby="vx_row_sel_row vx_row_sel_{{::row[vxGridCtrl.vxColSettings.primaryId]}}" /></div>'};e.vxConfig.columnDefConfigs.unshift(r)}_.each(e.vxConfig.vxData,function(t,n){var i=t[e.vxColSettings.primaryId];e.vxColSettings.rowSelected[i]=!1,e.vxColSettings.vxRowSelectionDisable[i]=!1})}t=new Date,e.multiBoxFilters=[];var a=[{prop:"enableDropdownsInHeader",defValue:!1},{prop:"selectionEnabled",defValue:!1},{prop:"selectionAtMyRisk",defValue:!1},{prop:"multiSelectionEnabled",defValue:!1},{prop:"showGridStats",defValue:!1},{prop:"showGridOptions",defValue:!1},{prop:"selectAllOnRenderAll",defValue:!1},{prop:"virtualization",defValue:!0},{prop:"pagination",defValue:!1},{prop:"pageLength",defValue:20},{prop:"data",defValue:[]},{prop:"vxFilteredData",defValue:[]},{prop:"xsRowTitleTemplate",defValue:'<div class="xsRowTemplate">{{row[vxGridCtrl.vxColSettings.primaryId]}}</div>'},{prop:"inlineAddRowEnabled",defValue:!1},{prop:"inlineEditSyncEnabled",defValue:!1},{prop:"inlineDeletingEnabled",defValue:!1},{prop:"inlineSaveOverrideEnabled",defValue:!1},{prop:"inlineDeleteOverrideEnabled",defValue:!1},{prop:"allRowsInDefaultEdit",defValue:!1},{prop:"jsonEditorEnabled",defValue:!1},{prop:"allRowsSelectionEnabled",defValue:!1},{prop:"sortPredicate",defValue:e.vxColSettings.primaryId},{prop:"reverseSortDirection",defValue:!1},{prop:"emptyFill",defValue:"<span>No records to display ...</span>"},{prop:"loaderGifSrc",defValue:"/resource/loaderWhite36.GIF"},{prop:"ariaPrimary",defValue:e.vxColSettings.primaryId},{prop:"xsTemplate",defValue:!1},{prop:"bindOnce",defValue:!1},{prop:"hybrid",defValue:!1},{prop:"latchExcess",defValue:5}];if(_.each(a,function(t){("undefined"===e.vxConfig[t.prop]||null==e.vxConfig[t.prop]||e.vxConfig[t.prop]=={})&&(e.vxConfig[t.prop]=t.defValue)}),e.vxColSettings.vxRowClass=e.vxConfig.initialRowClasses||{},e.getWindowDimensions().w<768&&(e.vxColSettings.xsViewEnabled=e.vxConfig.xsTemplate,e.vxConfig.latchExcess=5),t=new Date,e.vxColSettings.selectAllOnRenderAll=e.vxConfig.selectAllOnRenderAll,_.each(e.vxConfig.columnDefConfigs,function(t){var n=[{prop:"renderDefn",defValue:!1},{prop:"renderHeadDefn",defValue:!1},{prop:"ddSort",defValue:!1},{prop:"ddGroup",defValue:!1},{prop:"ddFilters",defValue:!1},{prop:"ddFiltersWithSearch",defValue:!1},{prop:"dropDownEnabled",defValue:!1},{prop:"hidden",defValue:!1},{prop:"xsHidden",defValue:!1},{prop:"locked",defValue:!1},{prop:"primary",defValue:!1},{prop:"width",defValue:"200"},{prop:"headerDefn",defValue:""},{prop:"cellDefn",defValue:""},{prop:"filterCellDefn",defValue:""},{prop:"inlineEditOnColumnEnabled",defValue:!1},{prop:"inlineEditValidation",defValue:!1},{prop:"editDefn",defValue:null},{prop:"editDefnTemplate",defValue:null},{prop:"headTabIndex",defValue:0},{prop:"columnIsRowSelect",defValue:!1},{prop:"columnIsDate",defValue:!1},{prop:"columnDatePipe",defValue:"dd/MM/yyyy"},{prop:"renderHybridCellDefn",defValue:!1},{prop:"hybridCompile",defValue:!1},{prop:"filterLimit",defValue:10}];_.each(n,function(e){("undefined"===t[e.prop]||null==t[e.prop]||t[e.prop]=={})&&(t[e.prop]=e.defValue)}),t.effectiveWidth=t.width,t.idCollection=[];var i=[{prop:"orderLocked",defValue:!1},{prop:"widthLocked",defValue:!1},{prop:"visbilityLocked",defValue:!1}];_.each(i,function(e){"undefined"===t[e.prop]||null==t[e.prop]||t[e.prop]=={}?t[e.prop]=t.locked:t[e.prop]=t.locked||t[e.prop]}),e.vxColSettings.reverseSettings[t.id]=!1,"undefined"!=typeof t.dropDownEnabled&&null!=t.dropDownEnabled&&1==t.dropDownEnabled&&1==e.vxConfig.enableDropdownsInHeader?e.vxColSettings.dropdDownEnabled[t.id]=!0:e.vxColSettings.dropdDownEnabled[t.id]=!1,e.vxColSettings.dropdDownLoaded[t.id]=!1,e.vxColSettings.dropdDownOpen[t.id]=!1,"undefined"!=typeof t.renderDefn&&null!=t.renderDefn&&t.renderDefn!={}&&1==t.renderDefn&&(t.cellDefn=t.cellDefn.replaceAll("VX_ROW_POINT","row[vxGridCtrl.vxColSettings.primaryId]"),t.cellDefn=t.cellDefn.replaceAll("VX_DATA_POINT","row[header.id]"),t.cellDefn=t.cellDefn.replaceAll("VX_ROW","row"),t.cellDefn=t.cellDefn.replaceAll("VX_CONFIG","vxConfig")),1==t.inlineEditOnColumnEnabled&&1!=e.vxConfig.hybrid&&((""==t.editDefn||null==t.editDefn)&&(t.editDefn='<input class="vx-edit-input form-control" ng-model="VX_DATA_POINT" />'),t.editDefn=t.editDefn.replaceAll("VX_ROW_POINT","row[vxGridCtrl.vxColSettings.primaryId]"),t.editDefn=t.editDefn.replaceAll("VX_DATA_POINT","row[header.id]"),t.editDefn=t.editDefn.replaceAll("VX_ROW","row"),t.editDefn=t.editDefn.replaceAll("VX_CONFIG","vxGridCtrl.vxConfig"),e.vxColSettings.colWithInlineEdits.push(t.id),-1!=t.editDefn.indexOf("vx-keep-watch")&&(t.editDefn=t.editDefn.replaceAll("vx-keep-watch",'vx-keep-watch-row-id="{{row[vxGridCtrl.vxColSettings.primaryId]}}" vx-keep-watch-field="'+t.id+'" vx-keep-watch')),1==t.inlineEditValidation&&(e.vxConfig.invalidRows={},e.vxConfig.invalidRowFields={},_.each(e.vxConfig.vxData,function(t,n){var i=t[e.vxColSettings.primaryId];e.vxConfig.invalidRows[i]=!1,e.vxConfig.invalidRowFields[i]={}}),t.editDefn=t.editDefn.replaceAll("VX_INVALID_ROW","vxGridCtrl.vxConfig.invalidRows[row[vxGridCtrl.vxColSettings.primaryId]] == true"),t.editDefn=t.editDefn.replaceAll("VX_INVALID_FIELD_ROW","vxGridCtrl.vxConfig.invalidRowFields[row[vxGridCtrl.vxColSettings.primaryId]]."+t.id+" == true")))}),t=new Date,e.vxConfig.columnDefConfigs=e.calculateEffectiveWidths(e.vxConfig.columnDefConfigs),"undefined"!=typeof e.vxConfig.multiSelectionDependentCol&&null!=e.vxConfig.multiSelectionDependentCol&&e.vxConfig.multiSelectionDependentCol!={}&&""!=e.vxConfig.multiSelectionDependentCol&&(e.vxColSettings.multiSelColDependent=!0),"undefined"!=typeof e.vxConfig.xsRowTitleTemplate&&null!=e.vxConfig.xsRowTitleTemplate&&e.vxConfig.xsRowTitleTemplate!={}&&""!=e.vxConfig.xsRowTitleTemplate&&(e.vxColSettings.xsRowTitleTemplateAvailable=!0),1==e.vxConfig.inlineAddRowEnabled&&1!=e.vxConfig.hybrid&&("undefined"==typeof e.vxConfig.newRowTemplate||null==e.vxConfig.newRowTemplate||e.vxConfig.newRowTemplate=={}||""==e.vxConfig.newRowTemplate)){var d=angular.copy(e.vxConfig.data[0]);_.each(e.vxConfig.columnDefConfigs,function(t){switch(typeof e.vxConfig.newRowTemplate[t.id]){case"boolean":e.vxConfig.newRowTemplate[t.id]=!1;break;case"number":e.vxConfig.newRowTemplate[t.id]=0;break;case"string":e.vxConfig.newRowTemplate[t.id]="";break;default:e.vxConfig.newRowTemplate[t.id]=null}}),e.vxConfig.newRowTemplate=d}var c=e.scope.$watch(angular.bind(this,function(){return this.getWindowDimensions()}),function(t,n){t.w<768?e.vxColSettings.xsViewEnabled=!0:e.vxColSettings.xsViewEnabled=!1},!0);0==e.vxConfig.xsTemplate&&c(),e.w.bind("resize",function(){e.scope.$apply()}),e.scope.config.id=e.vxConfig.id=_.uniqueId("_vxUID_"),e.scope.config.getVxCounts=function(){if("undefined"!=typeof e.vxConfig&&null!=e.vxConfig&&e.vxConfig!={}&&"undefined"!==e.vxConfig.id&&null!=e.vxConfig.id&&e.vxConfig.id!={}){var t={id:e.vxConfig.id,data:{vxAllDataLength:e.getAllRowLength(),vxFilteredDataLength:e.multiBoxFilters.length>0?1!=e.vxConfig.hybrid?e.vxConfig.vxFilteredData.length:e.vxConfig.vxData.length:0,vxSelectedDataLength:e.vxColSettings.multiSelected.length}};return t}return void 0},e.scope.config.getData=function(){return e.vxConfig.data},e.scope.config.getActiveDataSet=function(){return e.vxConfig.vxData},e.scope.config.getFilteredDataSet=function(){return e.vxConfig.vxFilteredData},e.scope.config.setRowFieldValidation=function(t,n,i){if("undefined"==typeof e.vxConfig.invalidRowFields[t]&&(e.vxConfig.invalidRows[t]=!1,e.vxConfig.invalidRowFields[t]={}),1==e.vxConfig.inlineEditSyncEnabled){var o=_.filter(e.vxColSettings.multiSelected,function(e){return 0==e.localeCompare(t)});"undefined"!=typeof o&&null!=o&&o.length>0&&_.each(e.vxColSettings.multiSelected,function(t){e.vxConfig.invalidRows[t]=!i,e.vxConfig.invalidRowFields[t][n]=!i})}e.vxConfig.invalidRows[t]=!i,e.vxConfig.invalidRowFields[t][n]=!i},e.scope.config.getSelectedRows=function(){if(1==e.vxConfig.selectionAtMyRisk){e.vxColSettings.multiSelected=[];for(var t in e.vxColSettings.rowSelected)1==e.vxColSettings.rowSelected[t]&&e.vxColSettings.multiSelected.push(t)}return e.vxColSettings.multiSelected},e.scope.config.getRowsBeingEdited=function(){var t=[];if("undefined"!=typeof e.vxColSettings.inlineEditState&&null!=e.vxColSettings.inlineEditState)for(var n in e.vxColSettings.inlineEditState)1==e.vxColSettings.inlineEditState[n]&&t.push(n);return t},e.scope.config.modifyRows=function(t,n){var i=[];return _.each(t,function(t){var o=t[e.vxColSettings.primaryId],l=_.find(e.vxConfig.vxData,function(t){return 0==t[e.vxColSettings.primaryId].localeCompare(o)}),r=_.find(e.vxConfig.data,function(t){return 0==t[e.vxColSettings.primaryId].localeCompare(o)});if("undefined"!=typeof l&&"undefined"!=typeof r){if("undefined"==typeof n||0==n.length)for(var a in t)0!=a.localeCompare(e.vxColSettings.primaryId)&&(l[a]=t[a],r[a]=t[a]);else n.length>0&&_.each(n,function(e){l[e]=t[e],r[e]=t[e]});i.push(r),1==e.vxConfig.hybrid&&e.hybridUpdateRows(i)}}),i},e.scope.config.selectRows=function(t){var n=[];return _.each(t,function(t){var i=e.vxColSettings.rowSelected[t];if("undefined"==typeof i||null==i||0==i){if(e.vxColSettings.rowSelected[t]=!0,e.vxColSettings.multiSelected.push(t),n.push(t),1==e.vxConfig.hybrid){var o=angular.element(document.getElementById("vx_row-sel_in_"+t));"undefined"!=typeof o&&null!=o&&o.length>0&&$(o).prop("checked",!0)}if(1==e.vxConfig.hybrid){var l=angular.element(document.getElementById("_vxMulLength"+e.vxConfig.id));"undefined"!=typeof l&&null!=l&&l.length>0&&$(l).text(e.filter("vxNumberFixedLen")(e.vxColSettings.multiSelected.length,2))}}}),n},e.scope.config.deselectRows=function(t){var n=[];return _.each(t,function(t){var i=e.vxColSettings.rowSelected[t];if("undefined"!=typeof i&&1==i){if(e.vxColSettings.rowSelected[t]=!1,e.vxColSettings.multiSelected=_.reject(e.vxColSettings.multiSelected,function(e){0==t.localeCompare(e)}),n.push(t),1==e.vxConfig.hybrid){var o=angular.element(document.getElementById("vx_row-sel_in_"+t));"undefined"!=typeof o&&null!=o&&o.length>0&&$(o).prop("checked",!1)}if(1==e.vxConfig.hybrid){var l=angular.element(document.getElementById("_vxMulLength"+e.vxConfig.id));"undefined"!=typeof l&&null!=l&&l.length>0&&$(l).text(e.filter("vxNumberFixedLen")(e.vxColSettings.multiSelected.length,2))}}}),n},e.scope.config.sortByColumn=function(t,n){e.vxConfig.sortPredicate=t,e.vxConfig.reverseSortDirection=n},e.scope.config.resetColumnFilters=function(t){_.each(t,function(t){e.vxColSettings.dropdDownLoaded[t]=!1,e.vxColSettings.colFilterPairs[t]={}})},e.buildFns(),e.scope.config.changeRowClass=e.scope.changeRowClass,e.scope.$emit("vxGridSettingsBuilt",{id:e.vxConfig.id}),t=new Date,e._hybridContainer=null,e._scrollContainer=null,e._rowHeight=48,e._excess=e.vxConfig.latchExcess,e._lastIndexCount=0,e._lastScrollDown=!1,e._lastScrollTop=0,e.scope.config.hybridDeleteRows=function(t){window.requestAnimFrame(function(){if(angular.forEach(t,function(t){var n=angular.element(document.getElementById(t));n.remove(),e.vxColSettings.inlineEditState[t]=!1,e.vxColSettings.rowSelected[t]=!1,e.vxColSettings.saveInProgress[t]=!1}),e.vxColSettings.multiSelected=_.difference(e.vxColSettings.multiSelected,t),1==e.vxConfig.hybrid){var n=angular.element(document.getElementById("_vxMulLength"+e.vxConfig.id));"undefined"!=typeof n&&null!=n&&n.length>0&&$(n).text(e.filter("vxNumberFixedLen")(e.vxColSettings.multiSelected.length,2))}})},t=new Date,1==e.vxConfig.hybrid&&(t=new Date,e.prepHybrid())},t.prototype.hybridUpdateRows=function(e){var t=this;angular.forEach(e,function(e){var n=t.hybridGetRowTmpl(e),i=angular.element(document.getElementById(n.rowId));i.empty(),i.replaceWith(n.rowTmpl),n.compile&&t.compile(i.contents())(t.scope)})},t.prototype.resetHybridGrid=function(){var e=this;e._lastIndexCount=0,e._lastScrollDown=!1,e._lastScrollTop=0,e.prepHybrid()},t.prototype.prepHybrid=function(){var e=this;e._hybridContainer=angular.element(document.getElementById("_vxHybrid"+e.vxConfig.id)),e._scrollContainer=angular.element(document.getElementById("_vxScrollContainer"+e.vxConfig.id)),e._hybridContainer.empty();var t=e._scrollContainer.height(),n=Math.ceil(t/e._rowHeight)+e._excess,i=_.first(e.vxConfig.vxData,n);e.appendRows(i),e._lastIndexCount=e._lastIndexCount+n,e._scrollContainer.on("scroll",function(){e.debPep()})},t.prototype.prepForScrollInsertion=function(){var e=this,t=e._hybridContainer.height()-(e._scrollContainer.height()+e._scrollContainer.scrollTop());if(e._scrollContainer.scrollTop()>e._lastScrollTop&&(0>t&&(t=0),t<e._rowHeight&&e._lastIndexCount<e.vxConfig.vxData.length)){var n=e._excess,i=_.rest(e.vxConfig.vxData,e._lastIndexCount),o=_.first(i,n);e._lastIndexCount=e._lastIndexCount+n,e.appendRows(o),e._scrollContainer.scrollTo(0,e._scrollContainer.scrollTop()-48)}e._lastScrollTop=e._scrollContainer.scrollTop()},t.prototype.debPep=_.debounce(t.prototype.prepForScrollInsertion,10),t.prototype.compileAppend=function(e,t,n){var i=this;if($(document.getElementById("_vxHybrid"+i.vxConfig.id)).append(e),n){var o=angular.element(document.getElementById(t));i.compile(o.contents())(i.scope)}},t.prototype.hybridGetRowTmpl=function(e){var t=this,n='<tr id="VX_ROW_ID" class="vxBodyRow vs-repeat-repeated-element VX_ROW_CLASSES ">VX_ALL_CELLS</tr>',i='<td class="vxBodyRowCell VX_TD_CLASS">VX_CELL_CONTENT</td>',o='<td colspan="VX_NON_HIDDEN_COL_LEN" style="padding-left:15px;"><span>VX_EMPTYFILL</span></td>',l='<span title="VX_CELL_TMPL">VX_CELL_TMPL</span>',r='<div class="vx-row-select"><input class="vx-row-select-toggle" rowid="VX_ROW_ID" type="checkbox" id="vx_row-sel_in_VX_ROW_ID" aria-labelledby="vx_row_sel_row vx_row_sel_VX_ROW_ID" /></div>',a="",d="",c=e[t.vxColSettings.primaryId],f=!1;if(1!=t.scope.config.noData)angular.forEach(t.vxConfig.columnDefConfigs,function(n){var o="",d=i,v="";if(1!=n.hidden){if(1!=n.renderHybridCellDefn&&1!=n.columnIsRowSelect&&1!=n.columnIsDate){var s="undefined"!=typeof e[n.id]&&null!=e[n.id]?e[n.id]:"";o=l,o=o.replaceAll("VX_CELL_TMPL",s)}else if(1!=n.renderHybridCellDefn&&1==n.columnIsDate){var s="undefined"!=typeof e[n.id]&&null!=e[n.id]?e[n.id]:null,u=t.filter("date")(s,n.columnDatePipe);o=l,o=o.replaceAll("VX_CELL_TMPL","undefined"==typeof u||null==u?"":u)}else if(1!=n.renderHybridCellDefn&&1==n.columnIsRowSelect){var s="undefined"!=typeof e[n.id]&&null!=e[n.id]?e[n.id]:null,g=t.vxColSettings.rowSelected[c]||!1;o=r,o=o.replaceAll("VX_ROW_ID",c),o=o.replace("VX_ROW_SEL_VAL",g)}else 1==n.renderHybridCellDefn&&"function"==typeof t.vxConfig.hybridCellDefn&&(o=t.vxConfig.hybridCellDefn(e,n)||"",f=f||n.hybridCompile);d=d.replace("VX_TD_CLASS",v),d=d.replace("VX_CELL_CONTENT",o),a+=d}});else{var v=t.getNonHiddenColCount();o=o.replace("VX_NON_HIDDEN_COL_LEN",v),o=o.replace("VX_EMPTYFILL",t.vxConfig.emptyFill),a=o}return"function"==typeof t.vxConfig.hybridCellDefn&&(d+=t.vxConfig.rowClassFn(e)),d=d+" "+("undefined"!=typeof t.vxColSettings.vxRowClass[c]?t.vxColSettings.vxRowClass[c]:""),d=d.trim(),n=n.replace("VX_ROW_CLASSES",d),n=n.replace("VX_ROW_ID",c),n=n.replaceAll("VX_ALL_CELLS",a),{rowTmpl:n,rowId:c,compile:f}},t.prototype.appendRows=function(e){var t=this;if(angular.forEach(e,function(e){var n=t.hybridGetRowTmpl(e);console.log(e),t.compileAppend(n.rowTmpl,n.rowId,n.compile)}),1==t.vxConfig.selectionEnabled){var n=document.getElementsByClassName("vx-row-select-toggle");_.each(n,function(e){var n=angular.element(e);n.on("click",function(e){var n=$(e.target).attr("rowid");console.log("click");var i=$(e.target).prop("checked");t.vxColSettings.rowSelected[n]=i;var o={key:n,value:t.vxColSettings.rowSelected[n],_pKey:n};1==t.vxConfig.selectionAtMyRisk?"function"==typeof t.scope.config.rowSelectionCallback&&t.scope.config.rowSelectionCallback(o):t.rowSelectionChanged(n)})})}},t.prototype.savingRows=function(e){var t=this,n=_.find(t.vxConfig.vxData,function(n){return n[t.vxColSettings.primaryId]==e});if("undefined"!=typeof n&&1==n.newRow)if(1==t.vxConfig.inlineSaveOverrideEnabled){t.vxColSettings.saveInProgress[e]=!0;var i=t.q.defer();i.promise.then(function(i){"undefined"!=typeof n.row&&1==i.save?(n.newRow=!1,_.each(t.vxConfig.columnDefConfigs,function(e){n[e.id]=i.row[e.id]})):t.vxConfig.data.unshift(n),t.vxColSettings.inlineEditState[e]="undefined"!=typeof i.save&&null!=i.save&&1==i.save?!1:!0,t.scope.$emit("vxGridRowSave",{id:t.vxConfig.id,data:n,save:!t.vxColSettings.inlineEditState[e]}),t.vxColSettings.saveInProgress[e]=!1},function(i){t.vxColSettings.saveInProgress[e]=!1,t.vxColSettings.inlineEditState[e]=!0,n.newRow=!0}),i.resolve(t.scope.config.fnInlineSaveOverride(n,null))}else"undefined"!=typeof o?_.each(t.vxConfig.columnDefConfigs,function(e){o[e.id]=n[e.id]}):t.vxConfig.data.unshift(n),t.vxColSettings.inlineEditState[e]=!1,t.$emit("vxGridRowSaved",{id:t.vxConfig.id,data:n});else{var o=_.find(t.vxConfig.data,function(n){return n[t.vxColSettings.primaryId]==e});if("undefined"!=typeof n&&"undefined"!=typeof o&&1==t.vxConfig.inlineSaveOverrideEnabled){t.vxColSettings.saveInProgress[e]=!0;var i=t.q.defer();i.promise.then(function(i){"undefined"!=typeof i.row&&1==i.save&&_.each(t.vxColSettings.colWithInlineEdits,function(e){o[e]=i.row[e]}),t.vxColSettings.inlineEditState[e]="undefined"!=typeof i.save&&null!=i.save&&1==i.save?!1:!0,t.scope.$emit("vxGridRowSave",{id:t.vxConfig.id,data:n,save:!t.vxColSettings.inlineEditState[e]}),t.vxColSettings.saveInProgress[e]=!1},function(n){t.vxColSettings.saveInProgress[e]=!1,t.vxColSettings.inlineEditState[e]=!0}),i.resolve(t.scope.config.fnInlineSaveOverride(n,o))}}},t.prototype.saveRow=function(e){var t=this,n=!1;if(1==t.vxConfig.inlineEditSyncEnabled){var i=_.filter(t.vxColSettings.multiSelected,function(t){return 0==t.localeCompare(e)});"undefined"!=typeof i&&null!=i&&i.length>0&&_.each(t.vxColSettings.multiSelected,function(e){t.scope.savingRows(e),n=!0})}n||t.savingRows(e)},t.prototype.revertEdits=function(){var e=this;if("undefined"!=typeof e.vxColSettings.multiSelected&&null!=e.vxColSettings.multiSelected&e.vxColSettings.multiSelected.length>0&&(_.each(e.vxColSettings.multiSelected,function(t){if(e.revertEditForRow(t),e.vxColSettings.rowSelected[t]=!1,1==e.vxConfig.hybrid){var n=angular.element(document.getElementById("vx_row-sel_in_"+t));"undefined"!=typeof n&&null!=n&&n.length>0&&$(n).prop("checked",!1)}}),e.vxColSettings.multiSelected=[],1==e.vxConfig.hybrid)){var t=angular.element(document.getElementById("_vxMulLength"+e.vxConfig.id));"undefined"!=typeof t&&null!=t&&t.length>0&&$(t).text(e.filter("vxNumberFixedLen")(e.vxColSettings.multiSelected.length,2))}},t.prototype.revertEditForRow=function(e){var t=this,n=_.find(t.vxConfig.vxData,function(n){return n[t.vxColSettings.primaryId]==e});if("undefined"!=typeof n&&1==n.newRow){if(t.vxColSettings.inlineEditState[e]=!1,t.vxColSettings.rowSelected[e]=!1,1==t.vxConfig.hybrid){var i=angular.element(document.getElementById("vx_row-sel_in_"+e));"undefined"!=typeof i&&null!=i&&i.length>0&&$(i).prop("checked",!1)}if(t.vxColSettings.multiSelected=_.reject(t.vxColSettings.multiSelected,function(t){0==e.localeCompare(t)}),t.vxConfig.vxData=_.reject(t.vxConfig.vxData,function(n){return 0==n[t.vxColSettings.primaryId].localeCompare(e)}),t.scope.$emit("vxGridRowEditRevert",{
id:t.vxConfig.id,data:n}),1==t.vxConfig.hybrid){var o=angular.element(document.getElementById("_vxMulLength"+t.vxConfig.id));"undefined"!=typeof o&&null!=o&&o.length>0&&$(o).text(t.filter("vxNumberFixedLen")(t.vxColSettings.multiSelected.length,2))}}else{var l=_.find(t.vxConfig.data,function(n){return n[t.vxColSettings.primaryId]==e});if("undefined"!=typeof n&&"undefined"!=typeof l){if(_.each(t.vxColSettings.colWithInlineEdits,function(e){n[e]=l[e]}),t.vxColSettings.inlineEditState[e]=!1,t.vxColSettings.rowSelected[e]=!1,1==t.vxConfig.hybrid){var i=angular.element(document.getElementById("vx_row-sel_in_"+e));"undefined"!=typeof i&&null!=i&&i.length>0&&$(i).prop("checked",!1)}if(t.vxColSettings.multiSelected=_.reject(t.vxColSettings.multiSelected,function(t){0==e.localeCompare(t)}),t.scope.$emit("vxGridRowEditRevert",{id:t.vxConfig.id,data:l}),1==t.vxConfig.hybrid){var o=angular.element(document.getElementById("_vxMulLength"+t.vxConfig.id));"undefined"!=typeof o&&null!=o&&o.length>0&&$(o).text(t.filter("vxNumberFixedLen")(t.vxColSettings.multiSelected.length,2))}}}},t.prototype.addNewRow=function(){var t=this;t.vxConfig.sortPredicate="_vxCreated",t.vxConfig.reverseSortDirection=!0;var n=angular.copy(t.vxConfig.newRowTemplate),i=e();n[t.vxColSettings.primaryId]=i,n.newRow=!0,n._vxCreated=(new Date).getTime(),t.vxColSettings.inlineEditState[i]=!0,t.vxConfig.vxData.unshift(n)},t.prototype.deleteRows=function(){var e=this;if("undefined"!=typeof e.vxColSettings.multiSelected&&null!=e.vxColSettings.multiSelected&e.vxColSettings.multiSelected.length>0)if(1==e.vxConfig.inlineDeleteOverrideEnabled){_.each(e.vxColSettings.multiSelected,function(t){e.vxColSettings.saveInProgress[t]=!0});var t=e.q.defer(),n=angular.copy(_.filter(e.vxConfig.vxData,function(t){return 1==_.contains(e.vxColSettings.multiSelected,t[e.vxColSettings.primaryId])}));t.promise.then(function(t){if(t.rows.length>0){var n=_.map(t.rows,function(t){return t[e.vxColSettings.primaryId]});if(e.vxConfig.vxData=_.reject(e.vxConfig.vxData,function(t){return 1==_.contains(n,t[e.vxColSettings.primaryId])}),e.scope.$emit("vxGridRowsDeleted",{id:e.vxConfig.id,data:n}),_.each(n,function(t){e.vxColSettings.inlineEditState[t]=!1,e.vxColSettings.rowSelected[t]=!1,e.vxColSettings.saveInProgress[t]=!1}),e.vxColSettings.multiSelected=_.difference(e.vxColSettings.multiSelected,n),1==e.vxConfig.hybrid){var i=angular.element(document.getElementById("_vxMulLength"+e.vxConfig.id));"undefined"!=typeof i&&null!=i&&i.length>0&&$(i).text(e.filter("vxNumberFixedLen")(e.vxColSettings.multiSelected.length,2))}}},function(e){}).then(function(){_.each(e.vxColSettings.multiSelected,function(t){e.vxColSettings.saveInProgress[t]=!1})}),t.resolve(e.scope.config.fnInlineDeleteOverride(n))}else if(e.vxConfig.vxData=_.reject(e.vxConfig.vxData,function(t){return 1==_.contains(e.vxColSettings.multiSelected,t[e.vxColSettings.primaryId])}),e.scope.$emit("vxGridRowsDeleted",{id:e.vxConfig.id,data:e.vxColSettings.multiSelected}),_.each(e.vxColSettings.multiSelected,function(t){e.vxColSettings.inlineEditState[t]=!1,e.vxColSettings.rowSelected[t]=!1}),e.vxColSettings.multiSelected=[],1==e.vxConfig.hybrid){var i=angular.element(document.getElementById("_vxMulLength"+e.vxConfig.id));"undefined"!=typeof i&&null!=i&&i.length>0&&$(i).text(e.filter("vxNumberFixedLen")(e.vxColSettings.multiSelected.length,2))}},t.prototype.activatePage=function(e){var t=this;t.vxColSettings.activePage=e,t.vxColSettings.vxPageStartPosition=e>0?e*t.vxConfig.pageLength-1:0},t.prototype.debouncedSearch=_.debounce(function(){var e=this;e.vxColSettings.xsSearch=angular.copy(e.vxColSettings.searchToken)},50),t.prototype.keyUpSearch=function(e){var t=this;13==e.keyCode?t.vxColSettings.xsSearch=angular.copy(t.vxColSettings.searchToken):8==e.keyCode&&""==t.vxColSettings.searchToken&&(t.vxColSettings.xsSearch=angular.copy(t.vxColSettings.searchToken))},t.prototype.filtTokenChange=function(e){var t=this;t.vxColSettings.filterSearchToken[e]=t.vxColSettings.enteredSearchToken[e]},t.prototype.debFiltTokenChange=_.debounce(t.prototype.filtTokenChange,10),t.prototype.editRow=function(e){var t=this;if(1==t.vxConfig.inlineEditSyncEnabled&&t.vxColSettings.multiSelected.length>0){var n=_.filter(t.vxColSettings.multiSelected,function(t){return 0==t.localeCompare(e)});"undefined"!=typeof n&&null!=n&&n.length>0&&_.each(t.vxColSettings.multiSelected,function(e){t.vxColSettings.inlineEditState[e]=!0})}t.vxColSettings.inlineEditState[e]=!0},t.prototype.editInProgressCount=function(){var e=this,t=0;if("undefined"!=typeof e.vxColSettings.inlineEditState&&null!=e.vxColSettings.inlineEditState)for(var n in e.vxColSettings.inlineEditState)t=1==e.vxColSettings.inlineEditState[n]?t+1:t;return t},t.prototype.filterTokenChnagedRapid=function(e){var t=this;""==t.vxColSettings.enteredSearchToken[e]?t.vxColSettings.filterSearchToken[e]="":t.debFiltTokenChange(e)},t.prototype.filterAssignVar=function(e){var t=this,n=angular.element(document.getElementById(e+"_searchfilters_"+t.vxConfig.id));"undefined"!=typeof n&&n.length>0&&(t.vxColSettings.filterSearchToken[e]=n[0].value)},t.prototype.filterKeyDown=function(e,t){},t.prototype.isValidHeaderName=function(e,t){return 0==e.renderHeadDefn&&"undefined"!=typeof t&&null!=t&&""!=t},t.prototype.headerClick=function(e,t){var n=this;console.log(e);var o=!0,l=$(t.target);if("undefined"!=typeof l&&null!=l&l.length>0){var r=l.closest("ul.dropdown-menu");"undefined"!=typeof r&&null!=r&r.length>0&&(o=!1)}if(0!=o){var a=n.selfEle.find(".vxTableScrollContainer"),d=(n.selfEle.find(".vxHeadRowCell .dropdown ul.dropdown-menu"),n.getWindowDimensions().h/2);_.each(n.selfEle.find(".vxHeadRowCell .dropdown ul.dropdown-menu"),function(e){var t=Math.min(Math.floor(a.height())-48,d);$(e).css("max-height",t+"px")}),_.each(n.vxConfig.columnDefConfigs,function(t){0!=t.id.localeCompare(e.id)&&(n.vxColSettings.dropdDownOpen[t.id]=!1)});var c=_.find(n.vxConfig.columnDefConfigs,function(t){return 0==t.id.localeCompare(e.id)});if("undefined"!=typeof c&&null!=c)if(0==n.vxColSettings.dropdDownEnabled[c.id])n.sortClick(e);else{n.vxColSettings.dropdDownLoaded[c.id]=!1,n.vxColSettings.dropdDownOpen[c.id]=!n.vxColSettings.dropdDownOpen[c.id];var f=_.filter(n.multiBoxFilters,function(e){return 0!=e.col.localeCompare(c.id)}),v=f.length>0,s=!1;"undefined"!=typeof n.vxColSettings.colFilterPairs[c.id]&&null!=n.vxColSettings.colFilterPairs[c.id]&&n.vxColSettings.colFilterPairs[c.id]!={}&&n.vxColSettings.colFilterPairs[c.id].length>0&&(s=!0),0==v&&1==s?(n.vxColSettings.dropdDownLoaded[c.id]=!0,_.each(n.vxColSettings.colFilterPairs[c.id],function(e){e.disabled=!1})):n.timeout(function(){if(c.idCollection=[],1==c.ddSort&&(n.vxColSettings.dropDownSort[c.id]=!0,c.idCollection.push(c.id+"_sort")),1==c.ddGroup&&1!=n.vxConfig.hybrid&&(n.vxColSettings.dropDownGroup[c.id]=!0,c.idCollection.push(c.id+"_group"),c.idCollection.push(c.id+"_ungroup")),1==c.ddFilters){if(c.idCollection.push(c.id+"_clearfilters"),c.idCollection.push(c.id+"_searchfilters_"+n.vxConfig.id),0==s){n.vxColSettings.dropDownFilters[c.id]=!0,n.vxColSettings.colFilterPairs[c.id]=[];var t=_.uniq(_.map(n.vxConfig.vxData,function(e){var t={value:e[c.id],type:""};return"undefined"!=typeof t.value&&null!=t.value&&t.value!={}&&"object"!=typeof t.value&&"number"!=typeof t.value&&"boolean"!=typeof t.value?t.value=t.value.trim():"boolean"==typeof t.value?t.value=t.value.toString().trim():"[object Date]"===Object.prototype.toString.call(t.value)&&(t.value=t.value.getTime(),t.type="date"),t}),function(e){return e.value});t=_.reject(t,function(e){return"undefined"==typeof e.value||e.value=={}}),_.each(t.sort(),function(e,t){var o=i(e,c.id,"col"),l=o.key,r=o.type,a=""===e.value||" "===e.value?"< blank >":e.value;a=null==e.value?" < null >":a;var d={key:l,label:e.value,name:a,col:c.id,type:r,disabled:!1,action:"filter"};"undefined"!=typeof c.filterCellDefn&&null!=c.filterCellDefn&&c.filterCellDefn!={}&&""!=c.filterCellDefn?(d.filterDefn=c.filterCellDefn.replaceAll("VX_DATA_POINT","filter.name"),d.filterDefnAvailable=!0):d.filterDefnAvailable=!1,n.vxColSettings.colFilterPairs[c.id].push(d),c.idCollection.push(c.id+"_filter_"+t),n.vxColSettings.colFiltersStatus[l]=!1}),n.vxColSettings.filterSearchToken[c.id]="",n.vxColSettings.colFiltersActivated[c.id]=!1}if(1==v){var o=_.last(n.multiBoxFilters),t=_.uniq(_.map(n.vxConfig.vxFilteredData,function(e){return e[c.id]}));0!=o.col.localeCompare(c.id)&&_.each(n.vxColSettings.colFilterPairs[c.id],function(e){1!=_.contains(t,e.label)?e.disabled=!0:e.disabled=!1})}n.lastScroll[c.id]=0,e.filterLimit=10;var l=angular.element(document.getElementById(n.vxConfig.id+"-dropdwon-menu-"+c.id));l.on("scroll",function(e){var t=c.id,i=$(e.target).scrollTop();i>n.lastScroll[t]&&(n.debouncedIncrementFilter(t),n.lastScroll[t]=i)})}n.vxColSettings.dropdDownLoaded[c.id]=!0},500)}}},t.prototype.debouncedIncrementFilter=_.throttle(n,500),t.prototype.sortClick=function(e){var t=this,n=_.find(t.vxConfig.columnDefConfigs,function(t){return 0==t.id.localeCompare(e.id)});"undefined"!=typeof n&&null!=n&&n.ddSort&&(0!=t.vxConfig.sortPredicate.localeCompare(n.id)&&(t.vxConfig.sortPredicate=n.id),t.vxColSettings.reverseSettings[n.id]=!t.vxColSettings.reverseSettings[n.id],t.vxConfig.reverseSortDirection=t.vxColSettings.reverseSettings[n.id],1==t.vxConfig.hybrid&&(t.vxConfig.vxData=_.sortBy(t.vxConfig.vxData,t.vxConfig.sortPredicate),1==t.vxConfig.reverseSortDirection&&t.vxConfig.vxData.reverse(),t.resetHybridGrid()))},t.prototype.getVisibleHeaderCounts=function(){var e=this;return _.filter(e.vxConfig.columnDefConfigs,function(e){return 1!=e.hidden}).length},t.prototype.groupClick=function(e){var t=this;if(t.clearFilters(),1!=t.vxColSettings.groupByColActivated[e.id]){t.vxConfig.sortPredicate=null;var n=[],o=e.id,l=e.columnName,r=_.uniq(_.pluck(t.vxConfig.vxData,o)),a=_.groupBy(_.sortBy(t.vxConfig.vxData,o),o);t.vxColSettings.groupKeys[o]=[],_.each(r,function(e){var r=i(e,o,"groupcol").key;if(t.vxColSettings.groupKeys[o].push(r),a[e].length>0){t.vxColSettings.groupPredicate[r]=!1;var d={type:"groupRow",colName:l,col:o,value:e,groupId:r,cellDefn:'<div class="vx-row-select"><input class="vx-row-select-toggle" type="checkbox" ng-model="VX_ROW_POINT" ng-change="groupSelectionChanged(row)" /></div>'};d.cellDefn=d.cellDefn.replaceAll("VX_ROW_POINT","vxColSettings.groupPredicate[row.groupId]"),n.push(d),n=_.union(n,a[e])}}),t.vxConfig.vxData=n,t.vxColSettings.groupByColActivated[e.id]=!0}},t.prototype.unGroupClick=function(e){var t=this;t.clearFilters(),1==t.vxColSettings.groupByColActivated[e.id]&&(t.vxConfig.sortPredicate=e.id,t.vxConfig.vxData=_.reject(t.vxConfig.vxData,function(e){return"undefined"!=typeof e.type&&null!=e.type?0==e.type.localeCompare("groupRow"):!1}),t.vxColSettings.groupByColActivated[e.id]=!1)},t.prototype.getAllRowLength=function(){var e=this;if(e.scope.config.noData)return 0;if(1==e.vxConfig.hybrid)return e._origData.length;var t=_.filter(e.vxConfig.vxData,function(e){return"undefined"==typeof e.type||null==e.type||0!=e.type.localeCompare("groupRow")||1==e.fillEmptyElement}).length;return t},t.prototype.removeGroupings=function(){var e=this;_.each(e.vxConfig.columnDefConfigs,function(t){e.unGroupClick(t)}),e.vxColSettings.groupPredicate={}},t.prototype.groupSelectionChanged=function(e){var t=this;t.emitArray=[];var n=t.vxColSettings.groupPredicate[e.groupId],i=_.filter(t.vxConfig.vxFilteredData,function(t){return"groupRow"!=t.type&&0==t[e.col].localeCompare(e.value)});if(_.each(i,function(e){if(0==t.vxColSettings.multiSelColDependent||1==t.vxColSettings.multiSelColDependent&&0==e[t.vxConfig.multiSelectionDependentCol]){var i=e[t.vxColSettings.primaryId];if(t.vxColSettings.rowSelected[i]!=n){t.vxColSettings.rowSelected[i]=n;({key:e[t.vxConfig.onSelectionReturnCol],value:t.vxColSettings.rowSelected[i],_pKey:i});t.emitArray.push(i),n?t.vxColSettings.multiSelected.push(i):t.vxColSettings.multiSelected=_.reject(t.vxColSettings.multiSelected,function(e){return 0==e.localeCompare(i)})}}}),1==t.vxConfig.hybrid){var o=angular.element(document.getElementById("_vxMulLength"+t.vxConfig.id));"undefined"!=typeof o&&null!=o&&o.length>0&&$(o).text(t.filter("vxNumberFixedLen")(t.vxColSettings.multiSelected.length,2))}t.scope.$emit("vxGridRwSelectionChange",{id:t.vxConfig.id,data:t.emitArray})},t.prototype.allRowSelectionChanged=function(){var e=this,t=e.vxColSettings.allRowSelected;if(1==t){if(_.each(e.vxConfig.vxData,function(n){if(1!=n.fillEmptyElement){var i=n[e.vxColSettings.primaryId];if(0==e.vxColSettings.rowSelected[i]&&1==t&&(e.vxColSettings.rowSelected[i]=!0,e.vxColSettings.multiSelected.push(i),1==e.vxConfig.hybrid)){var o=angular.element(document.getElementById("vx_row-sel_in_"+i));"undefined"!=typeof o&&null!=o&&o.length>0&&$(o).prop("checked",!0)}}}),_.each(e.vxConfig.columnDefConfigs,function(t){1==e.vxColSettings.dropDownGroup[t.id]&&1==e.vxColSettings.groupByColActivated[t.id]&&_.each(e.vxColSettings.groupKeys[t.id],function(t){e.vxColSettings.groupPredicate[t]=!0})}),1==e.vxConfig.hybrid){var n=angular.element(document.getElementById("_vxMulLength"+e.vxConfig.id));"undefined"!=typeof n&&null!=n&&n.length>0&&$(n).text(e.filter("vxNumberFixedLen")(e.vxColSettings.multiSelected.length,2))}e.scope.$emit("vxGridRowAllSelectionChange",{id:e.vxConfig.id,data:{toggledTo:t,array:e.vxColSettings.multiSelected}})}else 0==t&&(e.clearSelection(),e.scope.$emit("vxGridRowAllSelectionChange",{id:e.vxConfig.id,data:{toggledTo:t,array:e.vxColSettings.multiSelected}}));if(1==e.vxConfig.hybrid){var n=angular.element(document.getElementById("_vxMulLength"+e.vxConfig.id));"undefined"!=typeof n&&null!=n&&n.length>0&&$(n).text(e.filter("vxNumberFixedLen")(e.vxColSettings.multiSelected.length,2))}},t.prototype.rowSelectionChanged=function(e){var t=this,n=e;console.log("4456456456");var i=_.find(t.vxConfig.vxData,function(n){return n[t.vxColSettings.primaryId]==e}),o={key:i[t.vxConfig.onSelectionReturnCol],value:t.vxColSettings.rowSelected[n],_pKey:n},l=!0;if(1==t.vxColSettings.rowSelected[n]&&1==t.vxColSettings.multiSelColDependent){l=!1;var r=t.vxConfig.multiSelectionDependentCol;if(1==i[r]&&0==t.vxColSettings.multiSelected.length)l=!0;else if(0==i[r]&&t.vxColSettings.multiSelected.length>=1){var a=t.vxColSettings.multiSelected[0],d=_.find(t.vxConfig.vxData,function(e){return 0==e[t.vxColSettings.primaryId].localeCompare(a)});"undefined"!=typeof d&&null!=d&&d!={}&&1==d[r]?(l=!1,t.vxColSettings.rowSelected[n]=!1):l=!0}else 0==i[r]?l=!0:t.vxColSettings.rowSelected[n]=!1}else 0==t.vxColSettings.rowSelected[n]&&(t.vxColSettings.multiSelected=_.reject(t.vxColSettings.multiSelected,function(e){return 0==e.localeCompare(n)}),l=!1,t.vxColSettings.allRowSelected=!1,t.scope.$emit("vxGridRowSelectionChange",{id:t.vxConfig.id,data:o}));if(l){var c=_.find(t.vxColSettings.multiSelected,function(e){return 0==e.localeCompare(n)});("undefined"==typeof c||null==c)&&t.vxColSettings.multiSelected.push(n),t.scope.$emit("vxGridRowSelectionChange",{id:t.vxConfig.id,data:o}),0==t.vxConfig.multiSelectionEnabled&&(_.each(t.vxColSettings.multiSelected,function(e){0!=e.localeCompare(n)&&(t.vxColSettings.rowSelected[e]=!1)}),t.vxColSettings.multiSelected=_.reject(t.vxColSettings.multiSelected,function(e){return 0!=e.localeCompare(n)}))}if(1==t.vxConfig.hybrid){var f=angular.element(document.getElementById("_vxMulLength"+t.vxConfig.id));"undefined"!=typeof f&&null!=f&&f.length>0&&$(f).text(t.filter("vxNumberFixedLen")(t.vxColSettings.multiSelected.length,2))}},t.prototype.filterClick=function(e,t){var n=this;n.clearSelection();var i=n.vxColSettings.colFiltersStatus[t.key];if(0==i){n.multiBoxFilters=_.reject(n.multiBoxFilters,function(e){return 0==e.key.localeCompare(t.key)});var o=_.find(n.multiBoxFilters,function(e){return 0==e.col.localeCompare(t.col)});("undefined"==typeof o||null==o||o=={}||0==o.length)&&(n.vxColSettings.colFiltersActivated[e.id]=!1)}else{var l=_.find(n.multiBoxFilters,function(e){return 0==e.key.localeCompare(t.key)});("undefined"==typeof l||null==l||l=={})&&n.multiBoxFilters.push(t),n.vxColSettings.colFiltersActivated[e.id]=!0}1==n.vxConfig.hybrid&&(n.vxConfig.vxData=n.filter("vxGridMultiBoxFilters")(n._origData,n.multiBoxFilters),n.resetHybridGrid())},t.prototype.filterClearClick=function(e){var t=this;if(1==t.vxColSettings.colFiltersActivated[e.id]){t.clearSelection();var n=_.filter(t.multiBoxFilters,function(t){return 0==t.col.localeCompare(e.id)});n.length>0&&_.each(n,function(e){t.vxColSettings.colFiltersStatus[e.key]=!1}),t.multiBoxFilters=_.reject(t.multiBoxFilters,function(t){return 0==t.col.localeCompare(e.id)}),t.vxColSettings.colFiltersActivated[e.id]=!1,t.vxColSettings.filterSearchToken[e.id]=""}if(""!=t.vxColSettings.filterSearchToken[e.id]){t.vxColSettings.filterSearchToken[e.id]="";var i=angular.element(document.getElementById(e.id+"_searchfilters_"+t.vxConfig.id));"undefined"!=typeof i&&i.length>0&&(i[0].value="")}1==t.vxConfig.hybrid&&(t.vxConfig.vxData=t.filter("vxGridMultiBoxFilters")(t._origData,t.multiBoxFilters),t.resetHybridGrid())},t.prototype.clearFilters=function(){var e=this;e.multiBoxFilters.length>0&&_.each(e.vxConfig.columnDefConfigs,function(t){e.filterClearClick(t)}),e.multiBoxFilters=[]},t.prototype.selectAllFiltered=function(){var e=this;e.vxColSettings.multiSelected.length>0&&e.clearSelection(),e.emitArray=[];var t="";1!=e.vxConfig.hybrid?t="vxFilteredData":(e.vxConfig.hybrid=!0)&&(t="vxData"),_.each(e.vxConfig[t],function(t){if(0==e.vxColSettings.multiSelColDependent||1==e.vxColSettings.multiSelColDependent&&0==t[e.vxConfig.multiSelectionDependentCol]){if(e.vxColSettings.rowSelected[t[e.vxColSettings.primaryId]]=!0,1==e.vxConfig.hybrid){var n=angular.element(document.getElementById("vx_row-sel_in_"+t[e.vxColSettings.primaryId]));"undefined"!=typeof n&&null!=n&&n.length>0&&$(n).prop("checked",!0)}var i=t[e.vxColSettings.primaryId],o={key:t[e.vxConfig.onSelectionReturnCol],value:e.vxColSettings.rowSelected[i],_pKey:i};if(e.emitArray.push(o),1==e.vxColSettings.rowSelected[i]){var l=_.find(e.vxColSettings.multiSelected,function(e){return 0==e.localeCompare(i)});("undefined"==typeof l||null==l)&&e.vxColSettings.multiSelected.push(i)}}}),e.scope.$emit("vxGridRowMultiSelectionChange",{id:e.vxConfig.id,data:e.scope.emitArray})},t.prototype.clearSelection=function(){var e=this;if(e.emitArray=[],_.each(e.vxColSettings.multiSelected,function(t){if(e.vxColSettings.rowSelected[t]=!1,1==e.vxConfig.hybrid){var n=angular.element(document.getElementById("vx_row-sel_in_"+t));"undefined"!=typeof n&&null!=n&&n.length>0&&$(n).prop("checked",!1)}var i=_.find(e.vxConfig.vxData,function(n){return"groupRow"!=n.type&&0==n[e.vxColSettings.primaryId].localeCompare(t)});if("undefined"!=typeof i&&null!=i){var o={key:i[e.vxConfig.onSelectionReturnCol],value:e.vxColSettings.rowSelected[t],_pKey:t};e.emitArray.push(o)}e.vxColSettings.multiSelected=[],e.vxColSettings.allRowSelected=!1,_.each(e.vxConfig.columnDefConfigs,function(t){1==e.vxColSettings.dropDownGroup[t.id]&&1==e.vxColSettings.groupByColActivated[t.id]&&_.each(e.vxColSettings.groupKeys[t.id],function(t){e.vxColSettings.groupPredicate[t]=!1})})}),1==e.vxConfig.hybrid){var t=angular.element(document.getElementById("_vxMulLength"+e.vxConfig.id));"undefined"!=typeof t&&null!=t&&t.length>0&&$(t).text(e.filter("vxNumberFixedLen")(e.vxColSettings.multiSelected.length,2))}e.scope.$emit("vxGridRowMultiSelectionChange",{id:e.vxConfig.id,data:e.emitArray})},t.prototype.upDownKeyDownHandlerHeaderMenu=function(e){if(40==e.keyCode&&40==e.keyCode){var t=$(e.target).siblings().find('[tabindex="0"]');t.length>0&&$(t[0]).focus()}},t.prototype.findIdToBeFocussed=function(e,t,n){var i=e;if(n)for(;i<=t.length;){var o=$("#"+t[i+1]);if($(o).is('[tabindex="0"]'))return t[i+1];i+=1}else if(!n)for(;i>=1;){var o=$("#"+t[i-1]);if($(o).is('[tabindex="0"]'))return t[i-1];i-=1}return e},t.prototype.findFocussable=function(e,t,n){var i=this,o=$(e).attr("id"),l=_.find(i.vxConfig.columnDefConfigs,function(e){return e.id==t});if("undefined"!=typeof l&&null!=l){var r=l.idCollection,a=_.indexOf(r,o);return-1!=a&&a!=r.length&&1==n?i.findIdToBeFocussed(a,r,!0):-1!=a&&0!=a&&0==n?i.findIdToBeFocussed(a,r,!1):null}},t.prototype.upDowKeyDownHandlerHeaderMenuItems=function(e,t){var n=this,i=!1;if(40!=e.keyCode&&38!=e.keyCode&&27!=e.keyCode)return!1;if(40==e.keyCode){var o=n.findFocussable($(e.target),t,!0);$("#"+o).is('[tabindex="0"]')&&$("#"+o).focus()}else if(38==e.keyCode){var o=n.findFocussable($(e.target),t,!1);null==o?$(e.target).closest(".dropdown").find("button").focus():$("#"+o).is('[tabindex="0"]')&&$("#"+o).focus()}else if(27==e.keyCode&&1==n.vxColSettings.dropdDownOpen[t]){n.vxColSettings.dropdDownOpen[t]=!1;var l=$(e.target).closest(".dropdown").find("button");l&&l.length>0&&$(l).focus()}i&&(e.stopPropagation(),e.preventDefault())},t.prototype.openManageColumns=function(){var e=this,t=e.modal.open({templateUrl:"template/vx-grid/vx-grid-manage-columns-modal.html",windowClass:"vxGridManageColMod",controller:["$scope","$uibModalInstance","originalSettings",function(e,t,n){e.headerSelected=null,e.headerSelectedForVisChange=null,e.copyForWidthVisChange=n,_.each(e.copyForWidthVisChange,function(e,t){e.order=t,e.chars=Math.ceil((e.width-20)/7),e.selected=!1}),e.swapAbove=function(t){if(0==t.locked){var n=t.order,i=t.order,o=!0;do{i-=1,o=!0;var l=_.find(e.copyForWidthVisChange,function(e){return e.order==i&&0==e.orderLocked});("undefined"==typeof l||null==l||l=={})&&(o=!1)}while(!o&&i>=0);if(o&&i>=0){var l=_.find(e.copyForWidthVisChange,function(e){return e.order==i&&0==e.orderLocked});"undefined"!=typeof l&&null!=l&&l!={}&&(l.order=n,t.order=i)}}},e.swapBelow=function(t){if(0==t.locked){var n=t.order,i=t.order,o=!0;do{i+=1,o=!0;var l=_.find(e.copyForWidthVisChange,function(e){return e.order==i&&0==e.orderLocked});("undefined"==typeof l||null==l||l=={})&&(o=!1)}while(!o&&i<=e.copyForWidthVisChange.length-1);if(o&&i<=e.copyForWidthVisChange.length-1){var l=_.find(e.copyForWidthVisChange,function(e){return e.order==i&&0==e.orderLocked});"undefined"!=typeof l&&null!=l&&l!={}&&(l.order=n,t.order=i)}}},e.makeVisible=function(t){var n=_.find(e.copyForWidthVisChange,function(e){return 0==e.id.localeCompare(t.id)});"undefined"!=typeof n&&null!=n&&n!={}&&0==n.visbilityLocked&&(n.hidden=!1)},e.makeHidden=function(t){var n=_.find(e.copyForWidthVisChange,function(e){return 0==e.id.localeCompare(t.id)});"undefined"!=typeof n&&null!=n&&n!={}&&0==n.visbilityLocked&&(n.hidden=!0)},e.saveChangeInConfig=function(){var n=[];n=_.sortBy(e.copyForWidthVisChange,function(t){var n=_.find(e.copyForWidthVisChange,function(e){return 0==e.id.localeCompare(t.id)});return"undefined"!=typeof n&&null!=n&&n!={}?n.order:1}),t.close(n)},e.widthChanged=function(e){e.width=Math.ceil(7*e.chars)+20},e.selectHeader=function(t){1!=t.locked&&(t.selected=!t.selected,_.each(e.copyForWidthVisChange,function(e){0!=e.id.localeCompare(t.id)&&(e.selected=!1)}),1==t.selected?e.headerSelected=t:e.headerSelected=null)},e.cancelChangeInConfig=function(){t.dismiss()},e.upDownKeyPressHandler=function(t){var n=!1;(38==t.keyCode||40==t.keyCode)&&(n=e.upDownMovement(t)),n&&(t.stopPropagation(),t.preventDefault())},e.upDownMovement=function(e){var t=!1;if(38==e.keyCode){var n=$(e.target).prev();n.length>0&&-1!=$(n[0]).attr("tabindex")&&$(n)[0].focus(),t=!0}else if(40==e.keyCode){var n=$(e.target).next();n.length>0&&-1!=$(n[0]).attr("tabindex")&&$(n)[0].focus(),t=!0}return t}}],backdrop:"static",resolve:{originalSettings:function(){return angular.copy(e.vxConfig.columnDefConfigs)}}});t.result.then(function(t){t=e.calculateEffectiveWidths(t),e.vxConfig.columnDefConfigs=t,1==e.vxConfig.hybrid&&e.resetHybridGrid(),e.scope.$emit("vxGridSettingsChanged",{id:e.vxConfig.id,data:t})},function(e){})},t.prototype.calculateEffectiveWidths=function(e){var t=this,n=_.reduce(e,function(e,t){var n=0;return 0==t.hidden&&(n=parseInt(t.width)),e+n},0),i=t.selfEle.find(".vxTableScrollContainer").width();return _.each(e,function(e){if(i>n){var t=parseInt(e.width)/n*(i-n);e.effectiveWidth=parseInt(e.width)+t}else e.effectiveWidth=e.width}),e},t.prototype.openJsonEditor=function(){var e=this,t=e.modal.open({templateUrl:"template/vx-grid/vx-grid-json-editor-modal.html",windowClass:"vxGridManageColMod",controller:["$scope","$modalInstance","griddata",function(e,t,n){e.data=angular.copy(n),e.changeData=[],e.configuration={editable:!0,viewButtonClass:"btn-info",editButtonClass:"btn-success"},e.jsonOptions={mode:"code",modes:["tree","form","code","text"],history:!1},e.onChangeJSON=function(t){e.changeData=t},e.saveChangeInConfig=function(){t.close(e.changeData)},e.cancelChangeInConfig=function(){t.dismiss()}}],backdrop:"static",resolve:{griddata:function(){return angular.copy(e.vxConfig.vxData)}}});t.result.then(function(t){e.vxConfig.vxData=t,e.scope.$emit("vxGridDataChanged",{id:e.vxConfig.id,data:t})},function(e){})},t.prototype.revealWrapToggle=function(){var e=this;e.vxColSettings.revealWrapRowData=!e.vxColSettings.revealWrapRowData},t.prototype.xsReset=function(){var e=this;e.vxColSettings.xsSearch=""},t.prototype.justScrollTop=function(){var e=this,t=e.selfEle.find(".vxTableContainer.scrollTableContainer");e.timeout(function(){$(t).animate({scrollTop:0},500)},10)},t.prototype.justScrollDown=function(){var e=this,t=e.selfEle.find(".vxTableContainer.scrollTableContainer"),n=$(t).scrollTop()||0;0==e.vxConfig.hybrid?e.timeout(function(){$(t).animate({scrollTop:n+96},33)},10):1==e.vxConfig.hybrid&&(e.prepForScrollInsertion(),e.timeout(function(){$(t).animate({scrollTop:n+100},300)},10))},t.prototype.showScrollDownArrow=function(){var e=this,t=e.selfEle.find(".vxTableContainer.scrollTableContainer"),n=e.selfEle.find(".scrollTableContainer table.vxTable");return"undefined"!=typeof t&&"undefined"!=typeof n&&null!=t&&null!=n&&n.height()>t.height()?!0:!1},t.prototype.showScrollUpArrow=function(){var e=this,t=e.selfEle.find(".vxTableContainer.scrollTableContainer"),n=e.selfEle.find(".scrollTableContainer table.vxTable");return"undefined"!=typeof t&&"undefined"!=typeof n&&null!=t&&null!=n&&n.height()>t.height()&&t.scrollTop()>48?!0:!1},t.prototype.outsideHeader=function(e){var t=this;1==t.vxColSettings.dropdDownOpen[e.id]&&(t.vxColSettings.dropdDownOpen[e.id]=!1,t.scope.$$phase||t.scope.$apply())},t.prototype.buildFns=function(){var e=this,t=["openJsonEditor","openManageColumns","resetVxInstance","clearFilters","selectAllFiltered","clearSelection","revealWrapToggle"];_.each(t,function(t){var n="vxGrid"+t.capitalizeFirstLetter(),i=t+"()";e.scope.$on(n,function(t,n){0==n.id.localeCompare(e.vxConfig.id)&&e.scope.$eval(i)}),e.scope.config[t]=function(){e.scope.$eval(i)}})}}();