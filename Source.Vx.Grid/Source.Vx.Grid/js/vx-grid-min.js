!function(){"use strict";function e(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"_"+e()}String.prototype.capitalizeFirstLetter=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.replaceAll=function(e,t){var i=new RegExp(e,"g");return this.replace(i,t)};var t=[];window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)}}(),angular.module("vx.grid.modules",["ngSanitize","ui.bootstrap","vs-repeat","angular-json-editor","duScroll"]).directive("vxGrid",function(){return{restrict:"E",scope:{config:"=",scrollParent:"="},controller:["$scope","$uibModal","$sce","$timeout","$rootScope","$window","$filter","$q","$compile",function(i,n,o,l,r,a,d,v,c){function s(e){_.each(i.vxConfig.columnDefConfigs,function(t){t.id==e&&(t.filterLimit=t.filterLimit+2)}),"$apply"!=i.$root.$$phase&&"$digest"!=i.$root.$$phase&&i.$digest()}function g(e,t,i){var n=i+"_"+t+"_key_",o="string";return null==e.value?n+="null":null==e.value?n+="null":"object"!=typeof e.value?(n+=e.value.toString().replace(/\s+/g,"_"),o=e.type):(n+=JSON.stringify(e.value).replace(/\s+/g,"_"),o="object"),{key:n,type:o}}function f(){var e="scroll_up_"+i.vxConfig.id,t=document.getElementById(e);t&&(t.style.display="NONE"),e="scroll_down_"+i.vxConfig.id,t=document.getElementById(e),t&&1==i.vxConfig.noData?t.style.display="NONE":t.style.display="BLOCK"}function u(){var e="scroll_down_"+i.vxConfig.id,t=i.selfEle.find(".vxTableContainer.scrollTableContainer"),n=i.selfEle.find(".scrollTableContainer table.vxTable");document.getElementById(e)&&(document.getElementById(e).style.display="NONE"),void 0!==t&&void 0!==n&&null!=t&&null!=n&&n.height()>t.height()&&document.getElementById(e)&&(document.getElementById(e).style.display="BLOCK")}function x(){var e="scroll_up_"+i.vxConfig.id,t=i.selfEle.find(".vxTableContainer.scrollTableContainer"),n=i.selfEle.find(".scrollTableContainer table.vxTable"),o=document.getElementById(e);if(o&&(o.style.display="NONE"),void 0!==t&&void 0!==n&&null!=t&&null!=n&&n.height()>t.height()&&t.scrollTop()>48){var o=document.getElementById(e);o&&(o.style.display="BLOCK")}}i.vxColSettings={},i.posLeft=1,i.posTop=0;var C={},p=angular.element(a);i.getWindowDimensions=function(){return{h:p.height(),w:p.width()}},i.resetVxInstance=function(){C={},i.vxColSettings={primaryId:null,dropdDownEnabled:{},dropdDownLoaded:{},dropdDownOpen:{},dropDownSort:{},dropDownFilters:{},dropDownGroup:{},colFiltersStatus:{},colFilterPairs:{},colFiltersActivated:{},lastProcessedForFilters:{},multiSelected:[],multiSelColDependent:!1,reverseSettings:{},groupPredicate:{},groupByColActivated:{},rowSelected:{},vxRowClass:{},vxRowSelectionDisable:{},revealWrapRowData:!1,selectAllEnabled:!0,menu:!1,xsViewEnabled:!1,xsRowTitleTemplateAvailable:!1,xsSearch:"",searchToken:"",inlineEditState:{},colWithInlineEdits:[],groupKeys:{},allRowSelected:!1,allRowSelectionDisabled:!1,filterSearchToken:{},enteredSearchToken:{},saveInProgress:{}};new Date,new Date,new Date;1==i.config.hybrid?i.vxConfig=i.config:i.vxConfig=angular.copy(i.config),new Date,new Date;var e=_.find(i.vxConfig.columnDefConfigs,function(e){return 1==e.primary}),n="_uid";if(void 0!==e&&null!=e?(_.each(i.vxConfig.vxData,function(t,i){1!=t.fillEmptyElement&&(t[e.id]=t[e.id].toString(),t[n]=t[e.id]),t._vxCreated=(new Date).getTime()}),n=e.id):_.each(i.vxConfig.vxData,function(e,t){e[n]=t}),i.config.id=i.vxConfig.id=void 0===i.vxConfig.id?_.uniqueId("_vxUID_"):i.vxConfig.id,i.vxConfig.editRowID=i.vxConfig.id+"_edit_row",i.vxConfig.saveRowID=i.vxConfig.id+"_save_row",i.vxConfig.selectRowID=i.vxConfig.id+"_sel_row",i.vxColSettings.primaryId=n,1==i.vxConfig.inlineEditingEnabled&&1!=i.vxConfig.hybrid){var o=_.find(i.vxConfig.columnDefConfigs,function(e){return 0==e.id.localeCompare("inlinediting")});if(void 0===o||null==o||o=={}){var r={id:"inlinediting",columnName:"Edit",renderDefn:!0,renderHeadDefn:!0,ddSort:!1,ddGroup:!1,ddFilters:!1,width:"50",locked:!0,headTabIndex:-1,cellDefn:'<div class="vx-row-edit icon-container" tabindex="0" ax-key="editRow(VX_ROW_POINT)" ng-show="vxColSettings.inlineEditState[VX_ROW_POINT] == false && vxColSettings.saveInProgress[VX_ROW_POINT] != true" role="button" aria-labelledby="{{::vxConfig.editRowID}} vx_row_sel_{{::row[vxColSettings.primaryId]}}" ><i class="icon icon-edit"></i></div><div class="vx-row-edit icon-container" ax-disabled="vxConfig.invalidRows[row[vxColSettings.primaryId]]" tabindex="0" ax-key="saveRow(VX_ROW_POINT)" ng-show="vxColSettings.inlineEditState[VX_ROW_POINT] == true && vxColSettings.saveInProgress[VX_ROW_POINT] != true" role="button" aria-labelledby="{{::vxConfig.saveRowID}} vx_row_sel_{{::row[vxColSettings.primaryId]}}" ><i class="icon icon-save"></i></div><div class="vx-row-edit icon-container loader" tabindex="0" ng-show="vxColSettings.saveInProgress[VX_ROW_POINT] == true" role="button" aria-labelledby="{{::vxConfig.selectRowID}} vx_row_sel_{{::row[vxColSettings.primaryId]}}" ><img class="loader-row" src="/resource/loaderBlue30.GIF"></i></div>',inlineEditOnColumnEnabled:!1};i.vxConfig.columnDefConfigs.unshift(r)}_.each(i.vxConfig.vxData,function(e,t){var n=e[i.vxColSettings.primaryId];i.vxColSettings.inlineEditState[n]=i.config.allRowsInDefaultEdit||!1})}if(new Date,1==i.vxConfig.selectionEnabled){var o=_.find(i.vxConfig.columnDefConfigs,function(e){return 0==e.id.localeCompare("checkbox")});if(void 0===o||null==o||o=={}){var r={id:"checkbox",columnName:"Row Selection",columnIsRowSelect:!0,renderDefn:!0,renderHeadDefn:!0,ddSort:!1,ddGroup:!1,ddFilters:!1,width:"50",locked:!0,headTabIndex:-1,headerDefn:'<div class="vx-row-select"><input class="vx-row-select-toggle" type="checkbox" ng-disabled="vxConfig.noData == true" ng-model="vxColSettings.allRowSelected" ng-change="allRowSelectionChanged()" ng-disabled="vxColSettings.allRowSelectionDisabled" ng-if="vxConfig.allRowsSelectionEnabled" aria-label="Select All Rows "  /></div>',cellDefn:'<div class="vx-row-select"><input class="vx-row-select-toggle" type="checkbox" ng-model="vxColSettings.rowSelected[VX_ROW_POINT]" ng-change="rowSelectionChanged(row)" ng-disabled="vxColSettings.vxRowSelectionDisable[VX_ROW_POINT]" ng-attr-id="vx_row-sel_in{{::row[vxColSettings.primaryId]}}" aria-labelledby="{{::vxConfig.selectRowID}} vx_row_sel_{{::row[vxColSettings.primaryId]}}" /></div><span class="offscreen" style="visibility:collapse;" ng-attr-id="vx_row_sel_{{::row[vxColSettings.primaryId]}}">{{::row[vxConfig.ariaPrimary]}}</span>'};i.vxConfig.columnDefConfigs.unshift(r)}_.each(i.vxConfig.vxData,function(e,t){var n=e[i.vxColSettings.primaryId];i.vxColSettings.rowSelected[n]=!1,i.vxColSettings.vxRowSelectionDisable[n]=!1})}new Date,i.multiBoxFilters=[];var a=[{prop:"enableDropdownsInHeader",defValue:!1},{prop:"selectionEnabled",defValue:!1},{prop:"selectionAtMyRisk",defValue:!1},{prop:"preserveSelectionOnFilters",defValue:!1},{prop:"multiSelectionEnabled",defValue:!1},{prop:"showGridStats",defValue:!1},{prop:"showGridOptions",defValue:!1},{prop:"selectAllOnRenderAll",defValue:!1},{prop:"virtualization",defValue:!0},{prop:"pagination",defValue:!1},{prop:"pageLength",defValue:20},{prop:"data",defValue:[]},{prop:"vxFilteredData",defValue:[]},{prop:"xsRowTitleTemplate",defValue:'<div class="xsRowTemplate">{{row[vxColSettings.primaryId]}}</div>'},{prop:"inlineAddRowEnabled",defValue:!1},{prop:"inlineEditSyncEnabled",defValue:!1},{prop:"inlineDeletingEnabled",defValue:!1},{prop:"inlineSaveOverrideEnabled",defValue:!1},{prop:"inlineDeleteOverrideEnabled",defValue:!1},{prop:"allRowsInDefaultEdit",defValue:!1},{prop:"jsonEditorEnabled",defValue:!1},{prop:"allRowsSelectionEnabled",defValue:!1},{prop:"sortPredicate",defValue:i.vxColSettings.primaryId},{prop:"sortPredicateFn",defValue:null},{prop:"reverseSortDirection",defValue:!1},{prop:"emptyFill",defValue:"<span>No records to display ...</span>"},{prop:"caption",defValue:"sample vx grid table caption"},{prop:"loaderGifSrc",defValue:"/resource/loaderWhite36.GIF"},{prop:"ariaPrimary",defValue:i.vxColSettings.primaryId},{prop:"xsTemplate",defValue:!1},{prop:"bindOnce",defValue:!1},{prop:"hybrid",defValue:!1},{prop:"latchExcess",defValue:5}];if(_.each(a,function(e){"undefined"!==i.vxConfig[e.prop]&&null!=i.vxConfig[e.prop]&&i.vxConfig[e.prop]!={}||(i.vxConfig[e.prop]=e.defValue)}),void 0!==i.vxConfig.sortPredicate&&null!=typeof i.vxConfig.sortPredicate&&typeof i.vxConfig.sortPredicate!={}&&(void 0!==i.vxConfig.sortPredicateFn&&null!=i.vxConfig.sortPredicateFn&&i.vxConfig.sortPredicateFn!={}||(i.vxConfig.sortPredicateFn=i.vxConfig.sortPredicate)),i.vxColSettings.vxRowClass=i.vxConfig.initialRowClasses||{},i.getWindowDimensions().w<768&&(i.vxColSettings.xsViewEnabled=i.vxConfig.xsTemplate,i.vxConfig.latchExcess=5),new Date,i.vxColSettings.selectAllOnRenderAll=i.vxConfig.selectAllOnRenderAll,_.each(i.vxConfig.columnDefConfigs,function(e){var t=[{prop:"renderDefn",defValue:!1},{prop:"renderHeadDefn",defValue:!1},{prop:"ddSort",defValue:!1},{prop:"ddGroup",defValue:!1},{prop:"ddFilters",defValue:!1},{prop:"ddFiltersWithSearch",defValue:!1},{prop:"dropDownEnabled",defValue:!1},{prop:"hidden",defValue:!1},{prop:"xsHidden",defValue:!1},{prop:"locked",defValue:!1},{prop:"primary",defValue:!1},{prop:"width",defValue:"200"},{prop:"headerDefn",defValue:""},{prop:"cellDefn",defValue:""},{prop:"filterCellDefn",defValue:""},{prop:"inlineEditOnColumnEnabled",defValue:!1},{prop:"inlineEditValidation",defValue:!1},{prop:"editDefn",defValue:null},{prop:"editDefnTemplate",defValue:null},{prop:"headTabIndex",defValue:0},{prop:"columnIsRowSelect",defValue:!1},{prop:"columnIsDate",defValue:!1},{prop:"columnDatePipe",defValue:"dd/MM/yyyy"},{prop:"renderHybridCellDefn",defValue:!1},{prop:"hybridCompile",defValue:!1},{prop:"filterLimit",defValue:10},{prop:"scopeIsRow",defValue:!1}];_.each(t,function(t){"undefined"!==e[t.prop]&&null!=e[t.prop]&&e[t.prop]!={}||(e[t.prop]=t.defValue)}),e.effectiveWidth=e.width,e.idCollection=[];var n=[{prop:"orderLocked",defValue:!1},{prop:"widthLocked",defValue:!1},{prop:"visbilityLocked",defValue:!1}];_.each(n,function(t){"undefined"===e[t.prop]||null==e[t.prop]||e[t.prop]=={}?e[t.prop]=e.locked:e[t.prop]=e.locked||e[t.prop]}),i.vxColSettings.reverseSettings[e.id]=!1,void 0!==e.dropDownEnabled&&null!=e.dropDownEnabled&&1==e.dropDownEnabled&&1==i.vxConfig.enableDropdownsInHeader?i.vxColSettings.dropdDownEnabled[e.id]=!0:i.vxColSettings.dropdDownEnabled[e.id]=!1,i.vxColSettings.dropdDownLoaded[e.id]=!1,i.vxColSettings.dropdDownOpen[e.id]=!1,void 0!==e.renderDefn&&null!=e.renderDefn&&e.renderDefn!={}&&1==e.renderDefn&&(e.cellDefn=e.cellDefn.replaceAll("VX_ROW_POINT","row[vxColSettings.primaryId]"),e.cellDefn=e.cellDefn.replaceAll("VX_DATA_POINT","row[header.id]"),e.cellDefn=e.cellDefn.replaceAll("VX_ROW","row"),e.cellDefn=e.cellDefn.replaceAll("VX_CONFIG","vxConfig")),1==e.inlineEditOnColumnEnabled&&1!=i.vxConfig.hybrid&&(""!=e.editDefn&&null!=e.editDefn||(e.editDefn='<input class="vx-edit-input form-control" ng-model="VX_DATA_POINT" />'),e.editDefn=e.editDefn.replaceAll("VX_ROW_POINT","row[vxColSettings.primaryId]"),e.editDefn=e.editDefn.replaceAll("VX_DATA_POINT","row[header.id]"),e.editDefn=e.editDefn.replaceAll("VX_ROW","row"),e.editDefn=e.editDefn.replaceAll("VX_CONFIG","vxConfig"),i.vxColSettings.colWithInlineEdits.push(e.id),e.editDefn.indexOf("vx-keep-watch")!=-1&&(e.editDefn=e.editDefn.replaceAll("vx-keep-watch",'vx-keep-watch-row-id="{{row[vxColSettings.primaryId]}}" vx-keep-watch-field="'+e.id+'" vx-keep-watch')),1==e.inlineEditValidation&&(i.vxConfig.invalidRows={},i.vxConfig.invalidRowFields={},_.each(i.vxConfig.vxData,function(e,t){var n=e[i.vxColSettings.primaryId];i.vxConfig.invalidRows[n]=!1,i.vxConfig.invalidRowFields[n]={}}),e.editDefn=e.editDefn.replaceAll("VX_INVALID_ROW","vxConfig.invalidRows[row[vxColSettings.primaryId]] == true"),e.editDefn=e.editDefn.replaceAll("VX_INVALID_FIELD_ROW","vxConfig.invalidRowFields[row[vxColSettings.primaryId]]."+e.id+" == true")))}),new Date,i.vxConfig.columnDefConfigs=i.calculateEffectiveWidths(i.vxConfig.columnDefConfigs),void 0!==i.vxConfig.multiSelectionDependentCol&&null!=i.vxConfig.multiSelectionDependentCol&&i.vxConfig.multiSelectionDependentCol!={}&&""!=i.vxConfig.multiSelectionDependentCol&&(i.vxColSettings.multiSelColDependent=!0),void 0!==i.vxConfig.xsRowTitleTemplate&&null!=i.vxConfig.xsRowTitleTemplate&&i.vxConfig.xsRowTitleTemplate!={}&&""!=i.vxConfig.xsRowTitleTemplate&&(i.vxColSettings.xsRowTitleTemplateAvailable=!0),1==i.vxConfig.inlineAddRowEnabled&&1!=i.vxConfig.hybrid&&(void 0===i.vxConfig.newRowTemplate||null==i.vxConfig.newRowTemplate||i.vxConfig.newRowTemplate=={}||""==i.vxConfig.newRowTemplate)){var v=angular.copy(i.vxConfig.data[0]);_.each(i.vxConfig.columnDefConfigs,function(e){switch(typeof i.vxConfig.newRowTemplate[e.id]){case"boolean":i.vxConfig.newRowTemplate[e.id]=!1;break;case"number":i.vxConfig.newRowTemplate[e.id]=0;break;case"string":i.vxConfig.newRowTemplate[e.id]="";break;default:i.vxConfig.newRowTemplate[e.id]=null}}),i.vxConfig.newRowTemplate=v}i.$watch("getWindowDimensions()",function(e,t){i.vxColSettings.xsViewEnabled=!1,i.vxConfig.columnDefConfigs=i.calculateEffectiveWidths(i.vxConfig.columnDefConfigs)},!0);p.bind("resize",function(){i.$apply()}),i.config.getVxCounts=function(){if(void 0!==i.vxConfig&&null!=i.vxConfig&&i.vxConfig!={}&&"undefined"!==i.vxConfig.id&&null!=i.vxConfig.id&&i.vxConfig.id!={}){return{id:i.vxConfig.id,data:{vxAllDataLength:i.getAllRowLength(),vxFilteredDataLength:i.multiBoxFilters.length>0?1!=i.vxConfig.hybrid?i.vxConfig.vxFilteredData.length:i.vxConfig.vxData.length:0,vxSelectedDataLength:i.vxColSettings.multiSelected.length}}}},i.config.getAppliedFilters=function(){if(void 0!==i.vxConfig&&null!=i.vxConfig&&i.vxConfig!={}&&"undefined"!==i.vxConfig.id&&null!=i.vxConfig.id&&i.vxConfig.id!={}){return _.map(i.multiBoxFilters,function(e){return{column:e.col,label:e.label,key:e.key}})}},i.config.getData=function(){return i.vxConfig.data},i.config.getActiveDataSet=function(){return i.vxConfig.vxData},i.config.getFilteredDataSet=function(){return i.vxConfig.vxFilteredData},i.config.setRowFieldValidation=function(e,t,n){if(void 0===i.vxConfig.invalidRowFields[e]&&(i.vxConfig.invalidRows[e]=!1,i.vxConfig.invalidRowFields[e]={}),1==i.vxConfig.inlineEditSyncEnabled){var o=_.filter(i.vxColSettings.multiSelected,function(t){return 0==t.localeCompare(e)});void 0!==o&&null!=o&&o.length>0&&_.each(i.vxColSettings.multiSelected,function(e){i.vxConfig.invalidRows[e]=!n,i.vxConfig.invalidRowFields[e][t]=!n})}i.vxConfig.invalidRows[e]=!n,i.vxConfig.invalidRowFields[e][t]=!n},i.config.getSelectedRows=function(){if(1==i.vxConfig.selectionAtMyRisk){i.vxColSettings.multiSelected=[];for(var e in i.vxColSettings.rowSelected)1==i.vxColSettings.rowSelected[e]&&void 0!==e&&"undefined"!=e.toString()&&i.vxColSettings.multiSelected.push(e)}return i.vxColSettings.multiSelected},i.config.getRowsBeingEdited=function(){var e=[];if(void 0!==i.vxColSettings.inlineEditState&&null!=i.vxColSettings.inlineEditState)for(var t in i.vxColSettings.inlineEditState)1==i.vxColSettings.inlineEditState[t]&&e.push(t);return e},i.config.modifyRows=function(e,t){var n=[];return _.each(e,function(e){var o=e[i.vxColSettings.primaryId],l=_.find(i.vxConfig.vxData,function(e){return 0==e[i.vxColSettings.primaryId].localeCompare(o)}),r=_.find(i.vxConfig.data,function(e){return 0==e[i.vxColSettings.primaryId].localeCompare(o)});if(void 0!==l&&void 0!==r){if(void 0===t||0==t.length)for(var a in e)0!=a.localeCompare(i.vxColSettings.primaryId)&&(l[a]=e[a],r[a]=e[a]);else t.length>0&&_.each(t,function(t){l[t]=e[t],r[t]=e[t]});n.push(r),1==i.vxConfig.hybrid&&i.hybridUpdateRows(n)}}),n},i.config.selectRows=function(e){var t=[];return _.each(e,function(e){var n=i.vxColSettings.rowSelected[e];if((void 0===n||null==n||0==n)&&(i.vxColSettings.rowSelected[e]=!0,i.vxColSettings.multiSelected.push(e),t.push(e),1==i.vxConfig.hybrid)){var o=angular.element(document.getElementById("vx_row-sel_in_"+e));void 0!==o&&null!=o&&o.length>0&&$(o).prop("checked",!0);var l=angular.element(document.getElementById("_vxMulLength"+i.vxConfig.id));void 0!==l&&null!=l&&l.length>0&&$(l).text(d("vxNumberFixedLen")(i.vxColSettings.multiSelected.length,2))}}),t},i.config.deselectRows=function(e){var t=[];return _.each(e,function(e){var n=i.vxColSettings.rowSelected[e];if(void 0!==n&&1==n){if(i.vxColSettings.rowSelected[e]=!1,i.vxColSettings.multiSelected=_.reject(i.vxColSettings.multiSelected,function(t){e.localeCompare(t)}),t.push(e),1==i.vxConfig.hybrid){var o=angular.element(document.getElementById("vx_row-sel_in_"+e));void 0!==o&&null!=o&&o.length>0&&$(o).prop("checked",!1)}if(1==i.vxConfig.hybrid){var l=angular.element(document.getElementById("_vxMulLength"+i.vxConfig.id));void 0!==l&&null!=l&&l.length>0&&$(l).text(d("vxNumberFixedLen")(i.vxColSettings.multiSelected.length,2))}}}),t},i.config.sortByColumn=function(e,t){var n=_.find(i.vxConfig.columnDefConfigs,function(t){return 0==t.id.localeCompare(e)});void 0!==n&&null!=n&&(i.vxConfig.sortPredicate=n.id,n.customSortEnabled?i.vxConfig.sortPredicateFn=n.customSortFn:i.vxConfig.sortPredicateFn=n.id,i.vxConfig.reverseSortDirection=t)},i.config.resetColumnFilters=function(e){_.each(e,function(e){i.vxColSettings.dropdDownLoaded[e]=!1,i.vxColSettings.colFilterPairs[e]={}})},i.config.removeRows=function(e){0==i.vxConfig.hybrid?(i.vxConfig.vxData=_.reject(i.vxConfig.vxData,function(t){return 1==_.contains(e,t[i.vxColSettings.primaryId])}),i.vxColSettings.multiSelected=_.difference(i.vxColSettings.multiSelected,e)):1==i.vxConfig.hybrid&&i.config.hybridDeleteRows(e)},i.buildFns(),i.config.changeRowClass=i.changeRowClass,i.$emit("vxGridSettingsBuilt",{id:i.vxConfig.id}),new Date;var s=null,g=null,S=i.vxConfig.latchExcess,m=0,h=!1,w=0;i.config.hybridDeleteRows=function(e){window.requestAnimFrame(function(){angular.forEach(e,function(e){angular.element(document.getElementById(e)).remove(),i.vxColSettings.inlineEditState[e]=!1,i.vxColSettings.rowSelected[e]=!1,i.vxColSettings.saveInProgress[e]=!1}),i._origData=_.reject(i._origData,function(t){return 1==_.contains(e,t[i.vxColSettings.primaryId])}),i.vxConfig.vxFilteredData=_.reject(i.vxConfig.vxFilteredData,function(t){return 1==_.contains(e,t[i.vxColSettings.primaryId])}),i.vxConfig.vxData=_.reject(i.vxConfig.vxData,function(t){return 1==_.contains(e,t[i.vxColSettings.primaryId])}),i.vxColSettings.multiSelected=_.difference(i.vxColSettings.multiSelected,e);var t=angular.element(document.getElementById("_vxMulLength"+i.vxConfig.id));void 0!==t&&null!=t&&t.length>0&&$(t).text(d("vxNumberFixedLen")(i.vxColSettings.multiSelected.length,2)),i.$$phase||i.$apply()})},i.hybridUpdateRows=function(e){angular.forEach(e,function(e){var t=i.hybridGetRowTmpl(e),n=angular.element(document.getElementById(t.rowId));n.empty(),n.replaceWith(t.rowTmpl),t.compile&&c(n.contents())(i)})},i.resetHybridGrid=function(){m=0,h=!1,w=0,i.prepHybrid()},i.prepHybrid=function(){s=angular.element(document.getElementById("_vxHybrid"+i.vxConfig.id)),g=angular.element(document.getElementById("_vxScrollContainer"+i.vxConfig.id)),s.empty(),_.each(t,function(e){e.scope&&e.scope.$destroy()}),t=[];var e=g.height(),n=Math.ceil(e/48)+S,o=[];i.vxConfig.pagination?(n=n>i.vxConfig.pageLength?i.vxConfig.pageLength:n,o=_.first(_.rest(i.vxConfig.vxFilteredData,i.vxColSettings.vxPageStartPosition),n)):o=_.first(i.vxConfig.vxFilteredData,n),i.appendRows(o),m+=n,f(),g.on("scroll",function(){i.debPep()})},i.prepForScrollInsertion=function(){var e=s.height()-(g.height()+g.scrollTop());if(g.scrollTop()>w){if(e<0&&(e=0),e<48&&m<i.vxConfig.vxFilteredData.length&&1==i.vxConfig.pagination&&m<i.vxConfig.pageLength){var t=S,n=[];1==i.vxConfig.pagination&&m<i.vxConfig.pageLength?(t+m>i.vxConfig.pageLength&&(t=i.vxConfig.pageLength-m),n=_.rest(i.vxConfig.vxFilteredData,i.vxColSettings.vxPageStartPosition+m)):0==i.vxConfig.pagination&&(n=_.rest(i.vxConfig.vxFilteredData,m));var o=_.first(n,t);m+=t,i.appendRows(o),g.scrollTo(0,g.scrollTop()-48)}u()}else x();w=g.scrollTop()},i.debPep=_.debounce(i.prepForScrollInsertion,10),i.compileAppend=function(e,n,o){if(o){var l=i.$new(),r=c(e),a=r(l);s&&s.append(a),t.push({id:n,scope:l})}else s&&s.append(e)},i.hybridGetRowTmpl=function(e){var t='<tr id="VX_ROW_ID" class="vxBodyRow vs-repeat-repeated-element VX_ROW_CLASSES ">VX_ALL_CELLS</tr>',n='<td colspan="VX_NON_HIDDEN_COL_LEN" style="padding-left:15px;"><span>VX_EMPTYFILL</span></td>',o='<span title="VX_CELL_TMPL">VX_CELL_TMPL</span>',l="",r="",a=e[i.vxColSettings.primaryId],v=!1;if(1!=i.config.noData)angular.forEach(i.vxConfig.columnDefConfigs,function(t){var n="",r='<td class="vxBodyRowCell VX_TD_CLASS" scope="VX_CELL_SCOPE">VX_CELL_CONTENT</td>',c="";if(1!=t.hidden){if(1!=t.renderHybridCellDefn&&1!=t.columnIsRowSelect&&1!=t.columnIsDate){var s=void 0!==e[t.id]&&null!=e[t.id]?e[t.id]:"";n=o,n=n.replaceAll("VX_CELL_TMPL",s)}else if(1!=t.renderHybridCellDefn&&1==t.columnIsDate){var s=void 0!==e[t.id]&&null!=e[t.id]?e[t.id]:null,g=d("date")(s,t.columnDatePipe);n=o,n=n.replaceAll("VX_CELL_TMPL",void 0===g||null==g?"":g)}else if(1!=t.renderHybridCellDefn&&1==t.columnIsRowSelect){var s=void 0!==e[t.id]&&null!=e[t.id]?e[t.id]:null,f=i.vxColSettings.rowSelected[a]||!1;n='<div class="vx-row-select"><input class="vx-row-select-toggle" rowid="VX_ROW_ID" type="checkbox" VX_ROW_SEL_VAL id="vx_row-sel_in_VX_ROW_ID" aria-labelledby="vx_row_sel_VX_ROW_ID" /><span class="offscreen" style="visibility:collapse;" id="vx_row_sel_VX_ROW_ID">Select row VX_ROW_ID</span></div>',n=n.replaceAll("VX_ROW_ID",a),n=n.replace("VX_ROW_SEL_VAL",1==f?"checked":"")}else 1==t.renderHybridCellDefn&&"function"==typeof i.vxConfig.hybridCellDefn&&(n=i.vxConfig.hybridCellDefn(e,t)||"",v=v||t.hybridCompile);r=1==t.scopeIsRow?r.replace("VX_CELL_SCOPE","row"):r.replace("VX_CELL_SCOPE",""),void 0!==t.columnClassFn&&"function"==typeof t.columnClassFn&&(c=t.columnClassFn(e)),r=r.replace("VX_TD_CLASS",c),r=r.replace("VX_CELL_CONTENT",n),l+=r}});else{var c=i.getNonHiddenColCount();n=n.replace("VX_NON_HIDDEN_COL_LEN",c),n=n.replace("VX_EMPTYFILL",i.vxConfig.emptyFill),l=n}return"function"==typeof i.vxConfig.hybridCellDefn&&(r+=i.vxConfig.rowClassFn(e)),r=r+" "+(void 0!==i.vxColSettings.vxRowClass[a]?i.vxColSettings.vxRowClass[a]:""),r=r.trim(),t=t.replace("VX_ROW_CLASSES",r),t=t.replace("VX_ROW_ID",a),t=t.replaceAll("VX_ALL_CELLS",l),{rowTmpl:t,rowId:a,compile:v}},i.appendRows=function(e){if(angular.forEach(e,function(e){var t=i.hybridGetRowTmpl(e);i.compileAppend(t.rowTmpl,t.rowId,t.compile)}),1==i.vxConfig.selectionEnabled){var t=document.getElementsByClassName("vx-row-select-toggle");_.each(t,function(e){angular.element(e).on("click",function(e){var t=$(e.target).attr("rowid");if(void 0!==t){var n=$(e.target).prop("checked");i.vxColSettings.rowSelected[t]=n;var o={key:t,value:i.vxColSettings.rowSelected[t],_pKey:t};if(1==i.vxConfig.selectionAtMyRisk){if(1==n){var l=_.find(i.vxColSettings.multiSelected,function(e){return 0==e.localeCompare(t)});void 0!==l&&null!=l||i.vxColSettings.multiSelected.push(t)}else 0==n&&(i.vxColSettings.multiSelected=_.reject(i.vxColSettings.multiSelected,function(e){return 0==e.localeCompare(t)}),i.vxColSettings.allRowSelected=!1);var r=angular.element(document.getElementById("_vxMulLength"+i.vxConfig.id));void 0!==r&&null!=r&&r.length>0&&$(r).text(d("vxNumberFixedLen")(i.vxColSettings.multiSelected.length,2)),"function"==typeof i.config.rowSelectionCallback&&i.config.rowSelectionCallback(o)}else i.rowSelectionChanged(t)}})})}},new Date,1==i.vxConfig.hybrid&&(new Date,void 0!==i.vxConfig.sortPredicateFn&&null!=i.vxConfig.sortPredicateFn&&i.vxConfig.sortPredicateFn!={}?i.vxConfig.vxFilteredData=_.sortBy(i.vxConfig.vxData,i.vxConfig.sortPredicateFn)||[]:i.vxConfig.vxFilteredData=i.vxConfig.vxData||[],l(i.prepHybrid,100))},i.editRow=function(e){if(1==i.vxConfig.inlineEditSyncEnabled&&i.vxColSettings.multiSelected.length>0){var t=_.filter(i.vxColSettings.multiSelected,function(t){return 0==t.localeCompare(e)});void 0!==t&&null!=t&&t.length>0&&_.each(i.vxColSettings.multiSelected,function(e){i.vxColSettings.inlineEditState[e]=!0})}i.vxColSettings.inlineEditState[e]=!0},i.editInProgressCount=function(){var e=0;if(void 0!==i.vxColSettings.inlineEditState&&null!=i.vxColSettings.inlineEditState)for(var t in i.vxColSettings.inlineEditState)e=1==i.vxColSettings.inlineEditState[t]?e+1:e;return e},i.$on("vxInlineEditFieldChange",function(e,t){if(1==i.vxConfig.inlineEditSyncEnabled){var n=_.filter(i.vxColSettings.multiSelected,function(e){return 0==e.localeCompare(t.rowId)});void 0!==n&&null!=n&&n.length>0&&_.each(i.vxColSettings.multiSelected,function(e){var n=_.find(i.vxConfig.vxData,function(t){return t[i.vxColSettings.primaryId]==e});void 0!==n&&null!=n&&1==i.vxColSettings.inlineEditState[e]&&(n[t.field]=t.value)})}}),i.savingRows=function(e){var t=_.find(i.vxConfig.vxData,function(t){return t[i.vxColSettings.primaryId]==e});if(void 0!==t&&1==t.newRow)if(1==i.vxConfig.inlineSaveOverrideEnabled){i.vxColSettings.saveInProgress[e]=!0;var n=v.defer();n.promise.then(function(n){void 0!==t.row&&1==n.save?(t.newRow=!1,_.each(i.vxConfig.columnDefConfigs,function(e){t[e.id]=n.row[e.id]})):i.vxConfig.data.unshift(t),i.vxColSettings.inlineEditState[e]=void 0===n.save||null==n.save||1!=n.save,i.$emit("vxGridRowSave",{id:i.vxConfig.id,data:t,save:!i.vxColSettings.inlineEditState[e]}),i.vxColSettings.saveInProgress[e]=!1},function(n){i.vxColSettings.saveInProgress[e]=!1,i.vxColSettings.inlineEditState[e]=!0,t.newRow=!0}),n.resolve(i.config.fnInlineSaveOverride(t,null))}else void 0!==o?_.each(i.vxConfig.columnDefConfigs,function(e){o[e.id]=t[e.id]}):i.vxConfig.data.unshift(t),i.vxColSettings.inlineEditState[e]=!1,i.$emit("vxGridRowSaved",{id:i.vxConfig.id,data:t});else{var o=_.find(i.vxConfig.data,function(t){return t[i.vxColSettings.primaryId]==e});if(void 0!==t&&void 0!==o&&1==i.vxConfig.inlineSaveOverrideEnabled){i.vxColSettings.saveInProgress[e]=!0;var n=v.defer();n.promise.then(function(n){void 0!==n.row&&1==n.save&&_.each(i.vxColSettings.colWithInlineEdits,function(e){o[e]=n.row[e]}),i.vxColSettings.inlineEditState[e]=void 0===n.save||null==n.save||1!=n.save,i.$emit("vxGridRowSave",{id:i.vxConfig.id,data:t,save:!i.vxColSettings.inlineEditState[e]}),i.vxColSettings.saveInProgress[e]=!1},function(t){i.vxColSettings.saveInProgress[e]=!1,i.vxColSettings.inlineEditState[e]=!0}),n.resolve(i.config.fnInlineSaveOverride(t,o))}}},i.saveRow=function(e){var t=!1;if(1==i.vxConfig.inlineEditSyncEnabled){var n=_.filter(i.vxColSettings.multiSelected,function(t){return 0==t.localeCompare(e)});void 0!==n&&null!=n&&n.length>0&&_.each(i.vxColSettings.multiSelected,function(e){i.savingRows(e),t=!0})}t||i.savingRows(e)},i.revertEdits=function(){if(void 0!==i.vxColSettings.multiSelected&&null!=i.vxColSettings.multiSelected&i.vxColSettings.multiSelected.length>0&&(_.each(i.vxColSettings.multiSelected,function(e){if(i.revertEditForRow(e),i.vxColSettings.rowSelected[e]=!1,1==i.vxConfig.hybrid){var t=angular.element(document.getElementById("vx_row-sel_in_"+e));void 0!==t&&null!=t&&t.length>0&&$(t).prop("checked",!1)}}),i.vxColSettings.multiSelected=[],1==i.vxConfig.hybrid)){var e=angular.element(document.getElementById("_vxMulLength"+i.vxConfig.id));void 0!==e&&null!=e&&e.length>0&&$(e).text(d("vxNumberFixedLen")(i.vxColSettings.multiSelected.length,2))}},i.revertEditForRow=function(e){var t=_.find(i.vxConfig.vxData,function(t){return t[i.vxColSettings.primaryId]==e});if(void 0!==t&&1==t.newRow){if(i.vxColSettings.inlineEditState[e]=!1,i.vxColSettings.rowSelected[e]=!1,1==i.vxConfig.hybrid){var n=angular.element(document.getElementById("vx_row-sel_in_"+e));void 0!==n&&null!=n&&n.length>0&&$(n).prop("checked",!1)}if(i.vxColSettings.multiSelected=_.reject(i.vxColSettings.multiSelected,function(t){e.localeCompare(t)}),i.vxConfig.vxData=_.reject(i.vxConfig.vxData,function(t){return 0==t[i.vxColSettings.primaryId].localeCompare(e)}),i.$emit("vxGridRowEditRevert",{id:i.vxConfig.id,data:t}),1==i.vxConfig.hybrid){var o=angular.element(document.getElementById("_vxMulLength"+i.vxConfig.id));void 0!==o&&null!=o&&o.length>0&&$(o).text(d("vxNumberFixedLen")(i.vxColSettings.multiSelected.length,2))}}else{var l=_.find(i.vxConfig.data,function(t){return t[i.vxColSettings.primaryId]==e});if(void 0!==t&&void 0!==l){if(_.each(i.vxColSettings.colWithInlineEdits,function(e){t[e]=l[e]}),i.vxColSettings.inlineEditState[e]=!1,i.vxColSettings.rowSelected[e]=!1,1==i.vxConfig.hybrid){var n=angular.element(document.getElementById("vx_row-sel_in_"+e));void 0!==n&&null!=n&&n.length>0&&$(n).prop("checked",!1)}if(i.vxColSettings.multiSelected=_.reject(i.vxColSettings.multiSelected,function(t){e.localeCompare(t)}),i.$emit("vxGridRowEditRevert",{id:i.vxConfig.id,data:l}),1==i.vxConfig.hybrid){var o=angular.element(document.getElementById("_vxMulLength"+i.vxConfig.id));void 0!==o&&null!=o&&o.length>0&&$(o).text(d("vxNumberFixedLen")(i.vxColSettings.multiSelected.length,2))}}}},i.addNewRow=function(){i.vxConfig.sortPredicate="_vxCreated",i.vxConfig.sortPredicateFn="_vxCreated",i.vxConfig.reverseSortDirection=!0;var t=angular.copy(i.vxConfig.newRowTemplate),n=e();t[i.vxColSettings.primaryId]=n,t.newRow=!0,t._vxCreated=(new Date).getTime(),i.vxColSettings.inlineEditState[n]=!0,i.vxConfig.vxData.unshift(t)},i.deleteRows=function(){if(void 0!==i.vxColSettings.multiSelected&&null!=i.vxColSettings.multiSelected&i.vxColSettings.multiSelected.length>0)if(1==i.vxConfig.inlineDeleteOverrideEnabled){_.each(i.vxColSettings.multiSelected,function(e){i.vxColSettings.saveInProgress[e]=!0});var e=v.defer(),t=angular.copy(_.filter(i.vxConfig.vxData,function(e){return 1==_.contains(i.vxColSettings.multiSelected,e[i.vxColSettings.primaryId])}));e.promise.then(function(e){if(e.rows.length>0){var t=_.map(e.rows,function(e){return e[i.vxColSettings.primaryId]});if(i.vxConfig.vxData=_.reject(i.vxConfig.vxData,function(e){return 1==_.contains(t,e[i.vxColSettings.primaryId])}),i.$emit("vxGridRowsDeleted",{id:i.vxConfig.id,data:t}),_.each(t,function(e){i.vxColSettings.inlineEditState[e]=!1,i.vxColSettings.rowSelected[e]=!1,i.vxColSettings.saveInProgress[e]=!1}),i.vxColSettings.multiSelected=_.difference(i.vxColSettings.multiSelected,t),1==i.vxConfig.hybrid){var n=angular.element(document.getElementById("_vxMulLength"+i.vxConfig.id));void 0!==n&&null!=n&&n.length>0&&$(n).text(d("vxNumberFixedLen")(i.vxColSettings.multiSelected.length,2))}}},function(e){}).then(function(){_.each(i.vxColSettings.multiSelected,function(e){i.vxColSettings.saveInProgress[e]=!1})}),e.resolve(i.config.fnInlineDeleteOverride(t))}else if(i.vxConfig.vxData=_.reject(i.vxConfig.vxData,function(e){return 1==_.contains(i.vxColSettings.multiSelected,e[i.vxColSettings.primaryId])}),i.$emit("vxGridRowsDeleted",{id:i.vxConfig.id,data:i.vxColSettings.multiSelected}),_.each(i.vxColSettings.multiSelected,function(e){i.vxColSettings.inlineEditState[e]=!1,i.vxColSettings.rowSelected[e]=!1}),i.vxColSettings.multiSelected=[],1==i.vxConfig.hybrid){var n=angular.element(document.getElementById("_vxMulLength"+i.vxConfig.id));void 0!==n&&null!=n&&n.length>0&&$(n).text(d("vxNumberFixedLen")(i.vxColSettings.multiSelected.length,2))}},i.activatePage=function(e){var t=i.vxColSettings.activePage;i.vxColSettings.activePage=e,i.vxColSettings.vxPageStartPosition=e>0?e*i.vxConfig.pageLength:0,i.vxColSettings.allRowSelected=!1,t!=i.vxColSettings.activePage&&i.vxConfig.hybrid&&i.resetHybridGrid()},i.debouncedSearch=_.debounce(function(){i.vxColSettings.xsSearch=angular.copy(i.vxColSettings.searchToken)},50),i.keyUpSearch=function(e){
13==e.keyCode?i.vxColSettings.xsSearch=angular.copy(i.vxColSettings.searchToken):8==e.keyCode&&""==i.vxColSettings.searchToken&&(i.vxColSettings.xsSearch=angular.copy(i.vxColSettings.searchToken))},i.filtTokenChange=function(e){i.vxColSettings.filterSearchToken[e]=i.vxColSettings.enteredSearchToken[e],_.each(i.vxConfig.columnDefConfigs,function(t){t.id==e&&(t.filterLimit=10,C[e]=0)})},i.debFiltTokenChange=_.debounce(i.filtTokenChange,10),i.filterTokenChnagedRapid=function(e){""==i.vxColSettings.enteredSearchToken[e]?(_.each(i.vxConfig.columnDefConfigs,function(t){t.id==e&&(t.filterLimit=10,C[e]=0)}),i.vxColSettings.filterSearchToken[e]=""):i.debFiltTokenChange(e)},i.filterAssignVar=function(e){var t=angular.element(document.getElementById(e+"_searchfilters_"+i.vxConfig.id));void 0!==t&&t.length>0&&(i.vxColSettings.filterSearchToken[e]=t[0].value,_.each(i.vxConfig.columnDefConfigs,function(t){t.id==e&&(t.filterLimit=10,C[e]=0)}))},i.isValidHeaderName=function(e,t){return 0==e.renderHeadDefn&&void 0!==t&&null!=t&&""!=t},i.headerClick=function(e,t){var n=!0,o=$(t.target);if(void 0!==o&&null!=o&o.length>0){var r=o.closest("ul.dropdown-menu");void 0!==r&&null!=r&r.length>0&&(n=!1)}if(0!=n){var a=i.selfEle.find(".vxTableScrollContainer"),d=(i.selfEle.find(".vxHeadRowCell .dropdown ul.dropdown-menu"),i.getWindowDimensions().h/2);_.each(i.selfEle.find(".vxHeadRowCell .dropdown ul.dropdown-menu"),function(e){var t=Math.min(Math.floor(a.height())-48,d);$(e).css("max-height",t+"px")}),_.each(i.vxConfig.columnDefConfigs,function(t){0!=t.id.localeCompare(e.id)&&(i.vxColSettings.dropdDownOpen[t.id]=!1)});var v=_.find(i.vxConfig.columnDefConfigs,function(t){return 0==t.id.localeCompare(e.id)});if(void 0!==v&&null!=v)if(0==i.vxColSettings.dropdDownEnabled[v.id])i.sortClick(e);else{i.vxColSettings.dropdDownLoaded[v.id]=!1,i.vxColSettings.dropdDownOpen[v.id]=!i.vxColSettings.dropdDownOpen[v.id];var c=_.filter(i.multiBoxFilters,function(e){return 0!=e.col.localeCompare(v.id)}),s=c.length>0,f=!1;void 0!==i.vxColSettings.colFilterPairs[v.id]&&null!=i.vxColSettings.colFilterPairs[v.id]&&i.vxColSettings.colFilterPairs[v.id]!={}&&i.vxColSettings.colFilterPairs[v.id].length>0&&(f=!0),0==s&&1==f?(i.vxColSettings.dropdDownLoaded[v.id]=!0,_.each(i.vxColSettings.colFilterPairs[v.id],function(e){e.disabled=!1})):l(function(){if(v.idCollection=[],1==v.ddSort&&(i.vxColSettings.dropDownSort[v.id]=!0,v.idCollection.push(i.vxConfig.id+"_"+v.id+"_sort")),1==v.ddGroup&&1!=i.vxConfig.hybrid&&(i.vxColSettings.dropDownGroup[v.id]=!0,v.idCollection.push(i.vxConfig.id+"_"+v.id+"_group"),v.idCollection.push(i.vxConfig.id+"_"+v.id+"_ungroup")),1==v.ddFilters){if(v.idCollection.push(i.vxConfig.id+"_"+v.id+"_clearfilters"),v.idCollection.push(v.id+"_searchfilters_"+i.vxConfig.id),v.idCollection.push(v.id+"_invokesearchfilters_"+i.vxConfig.id),0==f){i.vxColSettings.dropDownFilters[v.id]=!0,i.vxColSettings.colFilterPairs[v.id]=[];var t=[],n=_.uniq(_.map(i.vxConfig.vxData,function(e){var t={value:e[v.id],type:""};return void 0!==t.value&&null!=t.value&&t.value!={}&&"object"!=typeof t.value&&"number"!=typeof t.value&&"boolean"!=typeof t.value?t.value=t.value.trim():"boolean"==typeof t.value?t.value=t.value.toString().trim():"[object Date]"===Object.prototype.toString.call(t.value)&&(t.value=t.value.getTime(),t.type="date"),t}),function(e){return e.value});n=_.reject(n,function(e){return void 0===e.value||e.value=={}}),_.each(n.sort(),function(e,n){var o=g(e,v.id,"col"),l=o.key,r=o.type,a=""===e.value||" "===e.value?"< blank >":e.value;a=null==e.value?" < null >":a;var d={key:l,label:e.value,name:a,col:v.id,type:r,disabled:!1,action:"filter"};void 0!==v.filterCellDefn&&null!=v.filterCellDefn&&v.filterCellDefn!={}&&""!=v.filterCellDefn?(d.filterDefn=v.filterCellDefn.replaceAll("VX_DATA_POINT","filter.name"),d.filterDefnAvailable=!0):d.filterDefnAvailable=!1,t.push(d),v.idCollection.push(i.vxConfig.id+"_"+v.id+"_filter_"+n),i.vxColSettings.colFiltersStatus[l]=!1}),t=_.sortBy(t,"label"),_.each(t,function(e){i.vxColSettings.colFilterPairs[v.id].push(e)}),i.vxColSettings.filterSearchToken[v.id]="",i.vxColSettings.colFiltersActivated[v.id]=!1}else{var n=_.uniq(_.map(i.vxConfig.vxFilteredData,function(e){return"[object Date]"===Object.prototype.toString.call(e[v.id])?e[v.id].getTime():"[object Boolean]"===Object.prototype.toString.call(e[v.id])?e[v.id].toString():e[v.id]}));_.each(i.vxColSettings.colFilterPairs[v.id],function(e){1!=_.contains(n,e.label)?e.disabled=!0:e.disabled=!1})}if(1==s){var o=_.last(i.multiBoxFilters),n=_.uniq(_.map(i.vxConfig.vxFilteredData,function(e){return"[object Date]"===Object.prototype.toString.call(e[v.id])?e[v.id].getTime():"[object Boolean]"===Object.prototype.toString.call(e[v.id])?e[v.id].toString():e[v.id]}));0!=o.col.localeCompare(v.id)&&_.each(i.vxColSettings.colFilterPairs[v.id],function(e){1!=_.contains(n,e.label)?e.disabled=!0:e.disabled=!1})}C[v.id]=0,e.filterLimit=10;angular.element(document.getElementById(i.vxConfig.id+"-dropdwon-menu-"+v.id)).on("scroll",function(e){var t=v.id,n=$(e.target).scrollTop();n>C[t]&&(i.debouncedIncrementFilter(t),C[t]=n)})}i.vxColSettings.dropdDownLoaded[v.id]=!0},500)}}},i.debouncedIncrementFilter=_.throttle(s,500),i.sortClick=function(e){var t=_.find(i.vxConfig.columnDefConfigs,function(t){return 0==t.id.localeCompare(e.id)});void 0!==t&&null!=t&&t.ddSort&&(0!=i.vxConfig.sortPredicate.localeCompare(t.id)&&(i.vxConfig.sortPredicate=t.id,t.customSortEnabled?i.vxConfig.sortPredicateFn=t.customSortFn:i.vxConfig.sortPredicateFn=t.id),i.vxColSettings.reverseSettings[t.id]=!i.vxColSettings.reverseSettings[t.id],i.vxConfig.reverseSortDirection=i.vxColSettings.reverseSettings[t.id],1==i.vxConfig.hybrid&&(i.vxConfig.vxFilteredData=_.sortBy(i.vxConfig.vxFilteredData,i.vxConfig.sortPredicateFn),1==i.vxConfig.reverseSortDirection&&i.vxConfig.vxFilteredData.reverse(),i.resetHybridGrid()))},i.getVisibleHeaderCounts=function(){return _.filter(i.vxConfig.columnDefConfigs,function(e){return 1!=e.hidden}).length},i.groupClick=function(e){if(i.clearFilters(),1!=i.vxColSettings.groupByColActivated[e.id]){i.vxConfig.sortPredicate=null;var t=[],n=e.id,o=e.columnName,l=_.uniq(_.pluck(i.vxConfig.vxData,n)),r=_.groupBy(_.sortBy(i.vxConfig.vxData,n),n);i.vxColSettings.groupKeys[n]=[],_.each(l,function(e){var l=g(e,n,"groupcol").key;if(i.vxColSettings.groupKeys[n].push(l),r[e].length>0){i.vxColSettings.groupPredicate[l]=!1;var a={type:"groupRow",colName:o,col:n,value:e,groupId:l,cellDefn:'<div class="vx-row-select"><input class="vx-row-select-toggle" type="checkbox" ng-model="VX_ROW_POINT" ng-change="groupSelectionChanged(row)" /></div>'};a.cellDefn=a.cellDefn.replaceAll("VX_ROW_POINT","vxColSettings.groupPredicate[row.groupId]"),t.push(a),t=_.union(t,r[e])}}),i.vxConfig.vxData=t,i.vxColSettings.groupByColActivated[e.id]=!0}},i.unGroupClick=function(e){if(i.clearFilters(),1==i.vxColSettings.groupByColActivated[e.id]){var t=_.find(i.vxConfig.columnDefConfigs,function(t){return 0==t.id.localeCompare(e.id)});void 0!==t&&null!=t&&(i.vxConfig.sortPredicate=t.id,t.customSortEnabled?i.vxConfig.sortPredicateFn=t.customSortFn:i.vxConfig.sortPredicateFn=t.id),i.vxConfig.vxData=_.reject(i.vxConfig.vxData,function(e){return void 0!==e.type&&null!=e.type&&0==e.type.localeCompare("groupRow")}),i.vxColSettings.groupByColActivated[e.id]=!1}},i.getAllRowLength=function(){return i.config.noData?0:1==i.vxConfig.hybrid?i._origData.length:_.filter(i.vxConfig.vxData,function(e){return void 0===e.type||null==e.type||0!=e.type.localeCompare("groupRow")||1==e.fillEmptyElement}).length},i.removeGroupings=function(){_.each(i.vxConfig.columnDefConfigs,function(e){i.unGroupClick(e)}),i.vxColSettings.groupPredicate={}},i.groupSelectionChanged=function(e){i.emitArray=[];var t=i.vxColSettings.groupPredicate[e.groupId],n=_.filter(i.vxConfig.vxFilteredData,function(t){return"groupRow"!=t.type&&0==t[e.col].localeCompare(e.value)});if(_.each(n,function(e){if(0==i.vxColSettings.multiSelColDependent||1==i.vxColSettings.multiSelColDependent&&0==e[i.vxConfig.multiSelectionDependentCol]){var n=e[i.vxColSettings.primaryId];if(i.vxColSettings.rowSelected[n]!=t){i.vxColSettings.rowSelected[n]=t;e[i.vxConfig.onSelectionReturnCol],i.vxColSettings.rowSelected[n];i.emitArray.push(n),t?i.vxColSettings.multiSelected.push(n):i.vxColSettings.multiSelected=_.reject(i.vxColSettings.multiSelected,function(e){return 0==e.localeCompare(n)})}}}),1==i.vxConfig.hybrid){var o=angular.element(document.getElementById("_vxMulLength"+i.vxConfig.id));void 0!==o&&null!=o&&o.length>0&&$(o).text(d("vxNumberFixedLen")(i.vxColSettings.multiSelected.length,2))}i.$emit("vxGridRwSelectionChange",{id:i.vxConfig.id,data:i.emitArray})},i.allRowSelectionChanged=function(){var e=i.vxColSettings.allRowSelected;if(1==e){if(_.each(i.vxConfig.vxFilteredData,function(t,n){var o=!0;if(1==i.vxConfig.pagination&&0==i.vxConfig.virtualization&&(n>=i.vxColSettings.vxPageStartPosition&&n<i.vxColSettings.vxPageStartPosition+i.vxConfig.pageLength||(o=!1)),1!=t.fillEmptyElement&&o){var l=t[i.vxColSettings.primaryId];if(0==i.vxColSettings.rowSelected[l]&&1==e&&(i.vxColSettings.rowSelected[l]=!0,i.vxColSettings.multiSelected.push(l),console.log(i.vxColSettings.multiSelected),1==i.vxConfig.hybrid)){var r=angular.element(document.getElementById("vx_row-sel_in_"+l));void 0!==r&&null!=r&&r.length>0&&$(r).prop("checked",!0)}}}),_.each(i.vxConfig.columnDefConfigs,function(e){1==i.vxColSettings.dropDownGroup[e.id]&&1==i.vxColSettings.groupByColActivated[e.id]&&_.each(i.vxColSettings.groupKeys[e.id],function(e){i.vxColSettings.groupPredicate[e]=!0})}),i.vxColSettings.multiSelected=_.reject(i.vxColSettings.multiSelected,function(e){return void 0===e||null==e||e=={}}),1==i.vxConfig.hybrid){var t=angular.element(document.getElementById("_vxMulLength"+i.vxConfig.id));void 0!==t&&null!=t&&t.length>0&&$(t).text(d("vxNumberFixedLen")(i.vxColSettings.multiSelected.length,2))}i.$emit("vxGridRowAllSelectionChange",{id:i.vxConfig.id,data:{toggledTo:e,array:i.vxColSettings.multiSelected}})}else 0==e&&(i.clearSelection(),i.$emit("vxGridRowAllSelectionChange",{id:i.vxConfig.id,data:{toggledTo:e,array:i.vxColSettings.multiSelected}}));if(1==i.vxConfig.hybrid){var t=angular.element(document.getElementById("_vxMulLength"+i.vxConfig.id));void 0!==t&&null!=t&&t.length>0&&$(t).text(d("vxNumberFixedLen")(i.vxColSettings.multiSelected.length,2))}},i.rowSelectionChanged=function(e){var t=e,n=_.find(i.vxConfig.vxData,function(t){return t[i.vxColSettings.primaryId]==e}),o={key:n[i.vxConfig.onSelectionReturnCol],value:i.vxColSettings.rowSelected[t],_pKey:t},l=!0;if(1==i.vxColSettings.rowSelected[t]&&1==i.vxColSettings.multiSelColDependent){l=!1;var r=i.vxConfig.multiSelectionDependentCol;if(1==n[r]&&0==i.vxColSettings.multiSelected.length)l=!0;else if(0==n[r]&&i.vxColSettings.multiSelected.length>=1){var a=i.vxColSettings.multiSelected[0],v=_.find(i.vxConfig.vxData,function(e){return 0==e[i.vxColSettings.primaryId].localeCompare(a)});void 0!==v&&null!=v&&v!={}&&1==v[r]?(l=!1,i.vxColSettings.rowSelected[t]=!1):l=!0}else 0==n[r]?l=!0:i.vxColSettings.rowSelected[t]=!1}else 0==i.vxColSettings.rowSelected[t]&&(i.vxColSettings.multiSelected=_.reject(i.vxColSettings.multiSelected,function(e){return 0==e.localeCompare(t)}),l=!1,i.vxColSettings.allRowSelected=!1,i.$emit("vxGridRowSelectionChange",{id:i.vxConfig.id,data:o}));if(l){var c=_.find(i.vxColSettings.multiSelected,function(e){return 0==e.localeCompare(t)});void 0!==c&&null!=c||i.vxColSettings.multiSelected.push(t),i.$emit("vxGridRowSelectionChange",{id:i.vxConfig.id,data:o}),0==i.vxConfig.multiSelectionEnabled&&(_.each(i.vxColSettings.multiSelected,function(e){0!=e.localeCompare(t)&&(i.vxColSettings.rowSelected[e]=!1)}),i.vxColSettings.multiSelected=_.reject(i.vxColSettings.multiSelected,function(e){return 0!=e.localeCompare(t)}))}if(1==i.vxConfig.hybrid){var s=angular.element(document.getElementById("_vxMulLength"+i.vxConfig.id));void 0!==s&&null!=s&&s.length>0&&$(s).text(d("vxNumberFixedLen")(i.vxColSettings.multiSelected.length,2))}},i.filterClick=function(e,t){if(0==i.vxConfig.preserveSelectionOnFilters&&i.clearSelection(),0==i.vxColSettings.colFiltersStatus[t.key]){i.multiBoxFilters=_.reject(i.multiBoxFilters,function(e){return 0==e.key.localeCompare(t.key)});var n=_.find(i.multiBoxFilters,function(e){return 0==e.col.localeCompare(t.col)});void 0!==n&&null!=n&&n!={}&&0!=n.length||(i.vxColSettings.colFiltersActivated[e.id]=!1)}else{var o=_.find(i.multiBoxFilters,function(e){return 0==e.key.localeCompare(t.key)});void 0!==o&&null!=o&&o!={}||i.multiBoxFilters.push(t),i.vxColSettings.colFiltersActivated[e.id]=!0}1==i.vxConfig.hybrid&&(i.vxConfig.vxFilteredData=d("vxGridMultiBoxFilters")(i._origData,i.multiBoxFilters),i.resetHybridGrid())},i.filterClearClick=function(e){if(1==i.vxColSettings.colFiltersActivated[e.id]){i.clearSelection();var t=_.filter(i.multiBoxFilters,function(t){return 0==t.col.localeCompare(e.id)});t.length>0&&_.each(t,function(e){i.vxColSettings.colFiltersStatus[e.key]=!1}),i.multiBoxFilters=_.reject(i.multiBoxFilters,function(t){return 0==t.col.localeCompare(e.id)}),i.vxColSettings.colFiltersActivated[e.id]=!1,i.vxColSettings.filterSearchToken[e.id]=""}if(""!=i.vxColSettings.filterSearchToken[e.id]){i.vxColSettings.filterSearchToken[e.id]="";var n=angular.element(document.getElementById(e.id+"_searchfilters_"+i.vxConfig.id));void 0!==n&&n.length>0&&(n[0].value="")}1==i.vxConfig.hybrid&&(i.vxConfig.vxFilteredData=d("vxGridMultiBoxFilters")(i._origData,i.multiBoxFilters),i.resetHybridGrid())},i.clearFilters=function(){i.multiBoxFilters.length>0&&_.each(i.vxConfig.columnDefConfigs,function(e){i.filterClearClick(e)}),i.multiBoxFilters=[]},i.selectAllFiltered=function(){i.vxColSettings.multiSelected.length>0&&i.clearSelection(),i.emitArray=[];var e="";1!=i.vxConfig.hybrid?e="vxFilteredData":(i.vxConfig.hybrid=!0)&&(e="vxFilteredData"),_.each(i.vxConfig[e],function(e){if(0==i.vxColSettings.multiSelColDependent||1==i.vxColSettings.multiSelColDependent&&0==e[i.vxConfig.multiSelectionDependentCol]){if(i.vxColSettings.rowSelected[e[i.vxColSettings.primaryId]]=!0,1==i.vxConfig.hybrid){var t=angular.element(document.getElementById("vx_row-sel_in_"+e[i.vxColSettings.primaryId]));void 0!==t&&null!=t&&t.length>0&&$(t).prop("checked",!0)}var n=e[i.vxColSettings.primaryId],o={key:e[i.vxConfig.onSelectionReturnCol],value:i.vxColSettings.rowSelected[n],_pKey:n};if(i.emitArray.push(o),1==i.vxColSettings.rowSelected[n]){var l=_.find(i.vxColSettings.multiSelected,function(e){return 0==e.localeCompare(n)});void 0!==l&&null!=l||i.vxColSettings.multiSelected.push(n)}}}),i.$emit("vxGridRowMultiSelectionChange",{id:i.vxConfig.id,data:i.emitArray})},i.clearSelection=function(){if(i.emitArray=[],_.each(i.vxColSettings.multiSelected,function(e){if(i.vxColSettings.rowSelected[e]=!1,1==i.vxConfig.hybrid){var t=angular.element(document.getElementById("vx_row-sel_in_"+e));void 0!==t&&null!=t&&t.length>0&&$(t).prop("checked",!1)}var n=_.find(i.vxConfig.vxData,function(t){return"groupRow"!=t.type&&0==t[i.vxColSettings.primaryId].toString().localeCompare(e)});if(void 0!==n&&null!=n){var o={key:n[i.vxConfig.onSelectionReturnCol],value:i.vxColSettings.rowSelected[e],_pKey:e};i.emitArray.push(o)}i.vxColSettings.multiSelected=[],i.vxColSettings.allRowSelected=!1,_.each(i.vxConfig.columnDefConfigs,function(e){1==i.vxColSettings.dropDownGroup[e.id]&&1==i.vxColSettings.groupByColActivated[e.id]&&_.each(i.vxColSettings.groupKeys[e.id],function(e){i.vxColSettings.groupPredicate[e]=!1})})}),1==i.vxConfig.hybrid){var e=angular.element(document.getElementById("_vxMulLength"+i.vxConfig.id));void 0!==e&&null!=e&&e.length>0&&$(e).text(d("vxNumberFixedLen")(i.vxColSettings.multiSelected.length,2))}i.$emit("vxGridRowMultiSelectionChange",{id:i.vxConfig.id,data:i.emitArray})},i.upDownKeyDownHandlerHeaderMenu=function(e,t){if(40==e.keyCode||27==e.keyCode)if(40==e.keyCode){var n=$(e.target).siblings().find('[tabindex="0"]');n.length>0&&$(n[0]).focus()}else if(27==e.keyCode&&1==i.vxColSettings.dropdDownOpen[t]){i.vxColSettings.dropdDownOpen[t]=!1;var o=$(e.target).closest(".dropdown").find("button");o&&o.length>0&&$(o).focus()}},i.findIdToBeFocussed=function(e,t,i){var n=e;if(i)for(n+1==t.length&&(n=-1);n<=t.length;){var o=$("#"+t[n+1]);if($(o).is('[tabindex="0"]'))return t[n+1];n+=1}else if(!i)for(0==n&&(n=t.length);n>=1;){var o=$("#"+t[n-1]);if($(o).is('[tabindex="0"]'))return t[n-1];n-=1}return e},i.findFocussable=function(e,t,n){var o=$(e).attr("id"),l=_.find(i.vxConfig.columnDefConfigs,function(e){return e.id==t});if(void 0!==l&&null!=l){var r=l.idCollection,a=_.indexOf(r,o);return a!=-1&&a!=r.length&&1==n?i.findIdToBeFocussed(a,r,!0):a!=-1&&0==n?i.findIdToBeFocussed(a,r,!1):null}},i.shiftKeyPressed=!1,i.upDowKeyUpHandlerHeaderMenuItems=function(e,t){16==e.keyCode&&(i.shiftKeyPressed=!1)},i.upDowKeyDownHandlerHeaderMenuItems=function(e,t){var n=!1;if(16==e.keyCode&&(i.shiftKeyPressed=!0),40!=e.keyCode&&38!=e.keyCode&&27!=e.keyCode&&9!=e.keyCode)return!1;if(40==e.keyCode||9==e.keyCode&&0==i.shiftKeyPressed){var o=i.findFocussable($(e.target),t,!0);$("#"+o).is('[tabindex="0"]')&&$("#"+o).focus(),n=!0}else if(38==e.keyCode||9==e.keyCode&&1==i.shiftKeyPressed){var o=i.findFocussable($(e.target),t,!1);null==o?$(e.target).closest(".dropdown").find("button").focus():$("#"+o).is('[tabindex="0"]')&&$("#"+o).focus(),n=!0}else if(27==e.keyCode&&1==i.vxColSettings.dropdDownOpen[t]){i.vxColSettings.dropdDownOpen[t]=!1;var l=$(e.target).closest(".dropdown").find("button");l&&l.length>0&&$(l).focus()}n&&(e.stopPropagation(),e.preventDefault())},i.openManageColumns=function(){n.open({templateUrl:"template/vx-grid/vx-grid-manage-columns-modal.html",windowClass:"vxGridManageColMod",controller:["$scope","$uibModalInstance","originalSettings",function(e,t,i){e.headerSelected=null,e.headerSelectedForVisChange=null,e.copyForWidthVisChange=i,_.each(e.copyForWidthVisChange,function(e,t){e.order=t,e.chars=Math.ceil((e.width-20)/7),e.selected=!1}),e.swapAbove=function(t){if(0==t.locked){var i=t.order,n=t.order,o=!0;do{n-=1,o=!0;var l=_.find(e.copyForWidthVisChange,function(e){return e.order==n&&0==e.orderLocked});void 0!==l&&null!=l&&l!={}||(o=!1)}while(!o&&n>=0);if(o&&n>=0){var l=_.find(e.copyForWidthVisChange,function(e){return e.order==n&&0==e.orderLocked});void 0!==l&&null!=l&&l!={}&&(l.order=i,t.order=n)}}},e.swapBelow=function(t){if(0==t.locked){var i=t.order,n=t.order,o=!0;do{n+=1,o=!0;var l=_.find(e.copyForWidthVisChange,function(e){return e.order==n&&0==e.orderLocked});void 0!==l&&null!=l&&l!={}||(o=!1)}while(!o&&n<=e.copyForWidthVisChange.length-1);if(o&&n<=e.copyForWidthVisChange.length-1){var l=_.find(e.copyForWidthVisChange,function(e){return e.order==n&&0==e.orderLocked});void 0!==l&&null!=l&&l!={}&&(l.order=i,t.order=n)}}},e.makeVisible=function(t){var i=_.find(e.copyForWidthVisChange,function(e){return 0==e.id.localeCompare(t.id)});void 0!==i&&null!=i&&i!={}&&0==i.visbilityLocked&&(i.hidden=!1)},e.makeHidden=function(t){var i=_.find(e.copyForWidthVisChange,function(e){return 0==e.id.localeCompare(t.id)});void 0!==i&&null!=i&&i!={}&&0==i.visbilityLocked&&(i.hidden=!0)},e.saveChangeInConfig=function(){var i=[];i=_.sortBy(e.copyForWidthVisChange,function(t){var i=_.find(e.copyForWidthVisChange,function(e){return 0==e.id.localeCompare(t.id)});return void 0!==i&&null!=i&&i!={}?i.order:1}),t.close(i)},e.widthChanged=function(e){e.width=Math.ceil(7*e.chars)+20},e.selectHeader=function(t){1!=t.locked&&(t.selected=!t.selected,_.each(e.copyForWidthVisChange,function(e){0!=e.id.localeCompare(t.id)&&(e.selected=!1)}),1==t.selected?e.headerSelected=t:e.headerSelected=null)},e.cancelChangeInConfig=function(){t.dismiss()},e.upDownKeyPressHandler=function(t){var i=!1;38!=t.keyCode&&40!=t.keyCode||(i=e.upDownMovement(t)),i&&(t.stopPropagation(),t.preventDefault())},e.upDownMovement=function(e){var t=!1;if(38==e.keyCode){var i=$(e.target).prev();i.length>0&&$(i[0]).attr("tabindex")!=-1&&$(i)[0].focus(),t=!0}else if(40==e.keyCode){var i=$(e.target).next();i.length>0&&$(i[0]).attr("tabindex")!=-1&&$(i)[0].focus(),t=!0}return t}}],backdrop:"static",resolve:{originalSettings:function(){return angular.copy(i.vxConfig.columnDefConfigs)}}}).result.then(function(e){e=i.calculateEffectiveWidths(e),i.vxConfig.columnDefConfigs=e,1==i.vxConfig.hybrid&&i.resetHybridGrid(),i.$emit("vxGridSettingsChanged",{id:i.vxConfig.id,data:e})},function(e){})},i.calculateEffectiveWidths=function(e){var t=_.reduce(e,function(e,t){var i=0;return 0==t.hidden&&(i=parseInt(t.width)),e+i},0),n=i.selfEle.find(".vxTableScrollContainer").width(),o=0;return _.each(e,function(e){if(n>t){var i=parseInt(e.width)/t*(n-t);e.effectiveWidth=parseInt(e.width)+i}else e.effectiveWidth=e.width;e.effectiveWidth=Math.floor(e.effectiveWidth),o+=e.effectiveWidth}),e},i.openJsonEditor=function(){n.open({templateUrl:"template/vx-grid/vx-grid-json-editor-modal.html",windowClass:"vxGridManageColMod",controller:["$scope","$modalInstance","griddata",function(e,t,i){e.data=angular.copy(i),e.changeData=[],e.configuration={editable:!0,viewButtonClass:"btn-info",editButtonClass:"btn-success"},e.jsonOptions={mode:"code",modes:["tree","form","code","text"],history:!1},e.onChangeJSON=function(t){e.changeData=t},e.saveChangeInConfig=function(){t.close(e.changeData)},e.cancelChangeInConfig=function(){t.dismiss()}}],backdrop:"static",resolve:{griddata:function(){return angular.copy(i.vxConfig.vxData)}}}).result.then(function(e){i.vxConfig.vxData=e,i.$emit("vxGridDataChanged",{id:i.vxConfig.id,data:e})},function(e){})},i.revealWrapToggle=function(){i.vxColSettings.revealWrapRowData=!i.vxColSettings.revealWrapRowData},i.xsReset=function(){i.vxColSettings.xsSearch=""},i.justScrollTop=function(){var e=i.selfEle.find(".vxTableContainer.scrollTableContainer");l(function(){$(e).animate({scrollTop:0},500)},10)},i.justScrollDown=function(){var e=i.selfEle.find(".vxTableContainer.scrollTableContainer"),t=$(e).scrollTop()||0;0==i.vxConfig.hybrid?l(function(){$(e).animate({scrollTop:t+96},33)},10):1==i.vxConfig.hybrid&&(i.prepForScrollInsertion(),l(function(){$(e).animate({scrollTop:t+100},300)},10))},i.outsideHeader=function(e){1==i.vxColSettings.dropdDownOpen[e.id]&&(i.vxColSettings.dropdDownOpen[e.id]=!1,i.$$phase||i.$apply())},i.$on("vsRepeatCollectionPartiallyRendered",function(e,t){i.$emit("vxPartiallyRendered",{id:i.vxConfig.id,data:t}),1==i.vxConfig.selectAllOnRenderAll&&(i.vxColSettings.selectAllEnabled=!1,i.$emit("vxPartiallyRenderedSelectAllDisabled",{id:i.vxConfig.id,data:t}))}),i.$on("vsRepeatCollectionCompletelyRendered",function(e,t){i.$emit("vxCompletelyRendered",{id:i.vxConfig.id,data:t}),1==i.vxConfig.selectAllOnRenderAll&&(i.vxColSettings.selectAllEnabled=!0,i.$emit("vxCompletelyRenderedSelectAllEnabled",{id:i.vxConfig.id,data:t}))}),i.buildFns=function(){var e=["openJsonEditor","openManageColumns","resetVxInstance","clearFilters","selectAllFiltered","clearSelection","revealWrapToggle"];_.each(e,function(e){var t="vxGrid"+e.capitalizeFirstLetter(),n=e+"()";i.$on(t,function(e,t){0==t.id.localeCompare(i.vxConfig.id)&&i.$eval(n)}),i.config[e]=function(){i.$eval(n)}})},i.$on("vxGridChangeRowClass",function(e,t){0==t.id.localeCompare(i.vxConfig.id)&&i.changeRowClass(t.data)}),i.changeRowClass=function(e){for(var t in e)i.vxColSettings.vxRowClass[t]=e[t];"$apply"!=i.$root.$$phase&&"$digest"!=i.$root.$$phase&&i.$apply()},i.$on("vxGridResetRowClass",function(e,t){0==t.id.localeCompare(i.vxConfig.id)&&(i.vxColSettings.vxRowClass={})}),i.$on("vxGridDisableRowSelection",function(e,t){0==t.id.localeCompare(i.vxConfig.id)&&_.each(t.data,function(e){i.vxColSettings.vxRowSelectionDisable[e.key]=e.value})}),i.$on("vxGridResetDisableRowSelection",function(e,t){if(0==t.id.localeCompare(i.vxConfig.id))for(var n in i.vxColSettings.vxRowSelectionDisable)i.vxColSettings.vxRowSelectionDisable[n]=!1})}],replace:!0,templateUrl:"template/vx-grid/vx-grid.html",link:function(e,t,i){e.selfEle=t,e.$watchCollection("config.data",function(t){t=t||[];new Date;void 0!==t&&0==t.length?(t=[{fillEmptyElement:!0}],e.config.noData=!0,1==e.config.hybrid&&void 0!==e.vxConfig&&angular.element(document.getElementById("_vxHybrid"+e.vxConfig.id)).empty()):e.config.noData=!1,1==e.config.hybrid?(e.config.vxData=_.clone(t),e._origData=_.clone(t)):e.config.vxData=angular.copy(t),new Date,delete e.vxConfig,e.resetVxInstance()}),e.config.hybrid,e.$watchCollection("vxConfig.vxFilteredData",function(t){t.length>=0&&(1==e.vxConfig.pagination&&(e.vxColSettings.pages=_.range(Math.ceil(t.length/parseInt(e.vxConfig.pageLength))),e.vxColSettings.vxPageEnabled=e.vxColSettings.pages.length>1,e.vxColSettings.activePage=0,e.vxColSettings.vxPageStartPosition=0),console.log("watch changes"))}),e.getvxTableContainerWidth=function(){var t=0;return _.each(e.vxConfig.columnDefConfigs,function(e){0==e.hidden&&(t+=e.effectiveWidth)}),e.vxConfig.totalWidth=t+"px",e.vxConfig.totalWidth},e.getNonHiddenColCount=function(){var t=1;return void 0!==e.vxConfig.columnDefConfigs&&e.vxConfig.columnDefConfigs.length>0&&(t=_.filter(e.vxConfig.columnDefConfigs,function(e){return 0==e.hidden}).length),t}}}}).directive("vxCompile",["$compile",function(e){return function(t,i,n){t.$watch(function(e){return e.$eval(n.vxCompile)},function(n){i.html(n),e(i.contents())(t)})}}]).directive("vxCompileCloneLink",["$compile",function(e){var t={},i={};return function(n,o,l){var r=null;l.vxCompileCloneLink in t?r=i[l.vxCompileCloneLink]:(i[l.vxCompileCloneLink]=n.$eval(l.vxCompileCloneLink),r=i[l.vxCompileCloneLink]);var a=null;r in t?a=t[r]:(t[r]=e(r),a=t[r]),a(n,function(e,t){o.append(e)})}}]).directive("vxEditFocusDisable",["$rootScope","$parse",function(e,t){var i={},n={},o=["input","select","button","textarea","object"];return{restrict:"AEC",link:function(e,l,r){var a=(t(r.vxEditFocusDisable),$(l).attr("id"));e.$watch(r.vxEditFocusDisable,function(e){if(e){n[a]={available:!0,stack:[]},_.each(o,function(e){var t=$(l).find(e);t.length>0&&_.each(t,function(e){var t=$(e).attr("id");void 0!==t&&null!=t&&""!=t||($(e).attr("id",_.uniqueId("elemid")),t=$(e).attr("id")),n[a].stack.push(t)})});var t=$(l).find("[tabindex]");t.length>0&&_.each(t,function(e){if($(e).attr("tabindex")!=-1&&0==_.contains(o,e.nodeName.toUpperCase())&&0==_.contains(n[a].stack,t)){var t=$(e).attr("id");void 0!==t&&null!=t&&""!=t||($(e).attr("id",_.uniqueId("elemid")),t=$(e).attr("id")),n[a].stack.push(t)}}),_.each(n[a].stack,function(e){i[e]=$("#"+e).attr("tabindex")||0,$("#"+e).attr("tabindex",-1)})}else 0==e&&void 0!==n[a]&&void 0!==n[a].available&&1==n[a].available&&(_.each(n[a].stack,function(e){var t=i[e];$("#"+e).attr("tabindex",t)}),n[a].available=!1)})}}}]).directive("axKey",["$rootScope","$parse",function(e,t){return{restrict:"A",compile:function(i,n){var o=t(n.axKey);return function(t,i){function l(i){var n=function(){o(t,{$event:i})};e.$$phase?t.$evalAsync(n):t.$apply(n)}i.attr("role")||i.attr("role","button"),i.attr("tabindex")||i.attr("tabindex",0);var r=[],a=0;r.push(t.$watch(n.axDisabled||n.ngDisabled,function(e){e?(a=i.attr("tabindex"),i.attr("tabindex",-1),i.attr("aria-disabled",!0)):(i.attr("tabindex",0),i.attr("aria-disabled",!1))})),i.on("click",function(e){t.$eval(n.axDisabled)||t.$eval(n.ngDisabled)||l(e)}),i.on("keyup",function(e){t.$eval(n.axDisabled)||t.$eval(n.ngDisabled)||13!=e.keyCode&&32!=e.keyCode||l(e)}),t.$on("$destroy",function(){for(;r.length;)r.shift()()})}}}}]).directive("vxKeepWatch",function(){return{restrict:"AEC",link:function(e,t,i){var n=i.vxKeepWatch,o=!1;e.$watch(i[n],function(t){o?e.$emit("vxInlineEditFieldChange",{field:i.vxKeepWatchField,value:t,rowId:i.vxKeepWatchRowId}):o=!0})}}}).filter("vxGridMultiBoxFilters",function(){return function(e,t){if(void 0!==t&&null!=t&&t.length>0){var i=e,n=e,o=_.groupBy(t,"col");for(var l in o){var r=o[l],a=[];_.each(r,function(e){a=_.union(a,_.filter(n,function(t){return void 0!==e.label&&null!=e.label&&e.label!={}&&void 0!==t[e.col]&&null!=t[e.col]&&t[e.col]!={}?"date"==e.type?void 0!==t[e.col]&&t[e.col]!={}&&null!=t[e.col]&&""!=t[e.col]&&t[e.col].getTime()==e.label:"object"==e.type?0==JSON.stringify(t[e.col]).localeCompare(JSON.stringify(e.label)):0==t[e.col].toString().trim().localeCompare(e.label):t[e.col]==e.label}))}),i=_.intersection(i,a)}return i}return e}}).directive("clickOutsideHeader",["$document","$parse",function(e,t){return{restrict:"A",link:function(i,n,o){var l=void 0!==o.outsideIfNot?o.outsideIfNot.replace(", ",",").split(","):[];void 0!==o.id&&l.push(o.id);var r=t(o.clickOutsideHeader);e.on("click",function(e){try{var t=$(e.target).closest("th.vxHeadRowCell");void 0!==t&&null!=t&&0!=t.length||i.$eval(o.checkClickOutside)&&i.$eval(r)}catch(e){}})}}}]).filter("vxNumberFixedLen",function(){return function(e,t){var i=parseInt(e,10);if(t=parseInt(t,10),isNaN(i)||isNaN(t))return e;for(i=""+i;i.length<t;)i="0"+i;return i}}).filter("vxStartFrom",function(){return function(e,t){if(e){t=+t;return e.slice(t)}return[]}})}();